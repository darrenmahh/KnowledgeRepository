<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>242. 有效的字母异位词 - 算法演示</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .input-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .input-group {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .input-field {
            flex: 1;
            min-width: 200px;
        }

        .input-field label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }

        .input-field input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .input-field input:focus {
            outline: none;
            border-color: #4facfe;
        }

        .button-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn-step {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn-step:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn-reset {
            background: #6c757d;
            color: white;
        }

        .btn-reset:hover {
            background: #5a6268;
        }

        .btn-disabled {
            background: #e9ecef !important;
            color: #6c757d !important;
            cursor: not-allowed !important;
            transform: none !important;
        }

        .demo-section {
            margin-top: 30px;
        }

        .step-info {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 5px;
        }

        .step-info h3 {
            color: #1976d2;
            margin-bottom: 10px;
        }

        .arrays-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .array-display {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #dee2e6;
        }

        .array-title {
            text-align: center;
            margin-bottom: 15px;
            font-size: 1.2em;
            font-weight: bold;
            color: #495057;
        }

        .array-grid {
            display: grid;
            grid-template-columns: repeat(13, 1fr);
            gap: 5px;
            margin-bottom: 10px;
        }

        .array-cell {
            text-align: center;
            padding: 8px 4px;
            border-radius: 5px;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s;
        }

        .array-letter {
            background: #e9ecef;
            color: #495057;
        }

        .array-value {
            background: #fff;
            border: 2px solid #dee2e6;
            color: #212529;
        }

        .array-value.positive {
            background: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }

        .array-value.negative {
            background: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }

        .array-value.highlight {
            background: #fff3cd;
            border-color: #ffeaa7;
            color: #856404;
            transform: scale(1.1);
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .strings-display {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .string-display {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #dee2e6;
        }

        .string-title {
            text-align: center;
            margin-bottom: 15px;
            font-size: 1.2em;
            font-weight: bold;
            color: #495057;
        }

        .string-chars {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
        }

        .char-box {
            width: 40px;
            height: 40px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
            background: white;
            transition: all 0.3s;
        }

        .char-box.current {
            background: #ffeaa7;
            border-color: #fdcb6e;
            transform: scale(1.2);
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .char-box.processed {
            background: #ddd;
            color: #666;
        }

        .result-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-top: 30px;
            text-align: center;
        }

        .result-true {
            background: #d4edda;
            border: 2px solid #c3e6cb;
            color: #155724;
        }

        .result-false {
            background: #f8d7da;
            border: 2px solid #f5c6cb;
            color: #721c24;
        }

        .result-section h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .arrays-container,
            .strings-display {
                grid-template-columns: 1fr;
            }
            
            .input-group {
                flex-direction: column;
            }
            
            .array-grid {
                grid-template-columns: repeat(6, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>242. 有效的字母异位词</h1>
            <p>交互式算法演示 - 逐步观察算法执行过程</p>
        </div>

        <div class="content">
            <div class="input-section">
                <div class="input-group">
                    <div class="input-field">
                        <label for="stringS">字符串 S:</label>
                        <input type="text" id="stringS" placeholder="例如: anagram" value="anagram">
                    </div>
                    <div class="input-field">
                        <label for="stringT">字符串 T:</label>
                        <input type="text" id="stringT" placeholder="例如: nagaram" value="nagaram">
                    </div>
                </div>
                <div class="button-group">
                    <button class="btn-primary" onclick="startDemo()">开始演示</button>
                    <button class="btn-step" id="nextStepBtn" onclick="nextStep()" disabled>下一步</button>
                    <button class="btn-reset" onclick="resetDemo()">重置</button>
                </div>
            </div>

            <div class="demo-section" id="demoSection" style="display: none;">
                <div class="step-info" id="stepInfo">
                    <h3>步骤 0: 准备开始</h3>
                    <p>点击"开始演示"来初始化算法</p>
                </div>

                <div class="strings-display">
                    <div class="string-display">
                        <div class="string-title">字符串 S</div>
                        <div class="string-chars" id="stringS-display"></div>
                    </div>
                    <div class="string-display">
                        <div class="string-title">字符串 T</div>
                        <div class="string-chars" id="stringT-display"></div>
                    </div>
                </div>

                <div class="arrays-container">
                    <div class="array-display">
                        <div class="array-title">字母索引 (a-z)</div>
                        <div class="array-grid" id="letterArray"></div>
                    </div>
                    <div class="array-display">
                        <div class="array-title">计数数组 record[]</div>
                        <div class="array-grid" id="countArray"></div>
                    </div>
                </div>

                <div class="result-section" id="resultSection" style="display: none;">
                    <h3 id="resultTitle"></h3>
                    <p id="resultText"></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let s = '', t = '';
        let record = new Array(26).fill(0);
        let currentStep = 0;
        let currentPhase = 0; // 0: init, 1: processing s, 2: processing t, 3: checking result
        let currentIndex = 0;

        function initArrays() {
            const letterArray = document.getElementById('letterArray');
            const countArray = document.getElementById('countArray');
            
            letterArray.innerHTML = '';
            countArray.innerHTML = '';
            
            for (let i = 0; i < 26; i++) {
                const letter = String.fromCharCode(97 + i); // a-z
                
                const letterCell = document.createElement('div');
                letterCell.className = 'array-cell array-letter';
                letterCell.textContent = letter;
                letterArray.appendChild(letterCell);
                
                const countCell = document.createElement('div');
                countCell.className = 'array-cell array-value';
                countCell.textContent = '0';
                countCell.id = `count-${i}`;
                countArray.appendChild(countCell);
            }
        }

        function displayStrings() {
            const sSDisplay = document.getElementById('stringS-display');
            const tSDisplay = document.getElementById('stringT-display');
            
            sSDisplay.innerHTML = '';
            tSDisplay.innerHTML = '';
            
            for (let i = 0; i < s.length; i++) {
                const charBox = document.createElement('div');
                charBox.className = 'char-box';
                charBox.textContent = s[i];
                charBox.id = `s-char-${i}`;
                sSDisplay.appendChild(charBox);
            }
            
            for (let i = 0; i < t.length; i++) {
                const charBox = document.createElement('div');
                charBox.className = 'char-box';
                charBox.textContent = t[i];
                charBox.id = `t-char-${i}`;
                tSDisplay.appendChild(charBox);
            }
        }

        function updateStepInfo(step, description) {
            const stepInfo = document.getElementById('stepInfo');
            stepInfo.innerHTML = `
                <h3>步骤 ${step}: ${getStepTitle()}</h3>
                <p>${description}</p>
            `;
        }

        function getStepTitle() {
            switch (currentPhase) {
                case 0: return '初始化';
                case 1: return '处理字符串 S';
                case 2: return '处理字符串 T';
                case 3: return '检查结果';
                default: return '完成';
            }
        }

        function updateArray(index, value, highlight = false) {
            const countCell = document.getElementById(`count-${index}`);
            countCell.textContent = value;
            
            // 移除之前的类
            countCell.classList.remove('positive', 'negative', 'highlight');
            
            if (highlight) {
                countCell.classList.add('highlight');
            } else if (value > 0) {
                countCell.classList.add('positive');
            } else if (value < 0) {
                countCell.classList.add('negative');
            }
        }

        function highlightChar(stringType, index, isProcessed = false) {
            // 清除之前的高亮
            document.querySelectorAll('.char-box').forEach(box => {
                box.classList.remove('current');
            });
            
            if (index >= 0) {
                const charBox = document.getElementById(`${stringType}-char-${index}`);
                if (charBox) {
                    if (isProcessed) {
                        charBox.classList.add('processed');
                    } else {
                        charBox.classList.add('current');
                    }
                }
            }
        }

        function startDemo() {
            s = document.getElementById('stringS').value.toLowerCase().trim();
            t = document.getElementById('stringT').value.toLowerCase().trim();
            
            if (!s || !t) {
                alert('请输入两个字符串！');
                return;
            }
            
            // 验证只包含小写字母
            if (!/^[a-z]+$/.test(s) || !/^[a-z]+$/.test(t)) {
                alert('请只输入小写字母！');
                return;
            }
            
            // 重置状态
            record = new Array(26).fill(0);
            currentStep = 0;
            currentPhase = 0;
            currentIndex = 0;
            
            // 显示演示区域
            document.getElementById('demoSection').style.display = 'block';
            document.getElementById('resultSection').style.display = 'none';
            
            // 初始化显示
            initArrays();
            displayStrings();
            
            updateStepInfo(0, '算法初始化完成。创建了大小为26的数组，用于记录a-z每个字母的出现次数。点击"下一步"开始处理字符串S。');
            
            document.getElementById('nextStepBtn').disabled = false;
            document.getElementById('nextStepBtn').classList.remove('btn-disabled');
        }

        function nextStep() {
            currentStep++;
            
            if (currentPhase === 0) {
                // 开始处理字符串S
                currentPhase = 1;
                currentIndex = 0;
                updateStepInfo(currentStep, `开始处理字符串 S = "${s}"。对于每个字符，我们将在对应的数组位置上+1。`);
            } else if (currentPhase === 1) {
                // 处理字符串S
                if (currentIndex < s.length) {
                    const char = s[currentIndex];
                    const charIndex = char.charCodeAt(0) - 97; // 'a' = 97
                    
                    record[charIndex]++;
                    
                    highlightChar('s', currentIndex);
                    updateArray(charIndex, record[charIndex], true);
                    
                    updateStepInfo(currentStep, 
                        `处理字符 '${char}' (索引 ${charIndex})：record[${charIndex}] = ${record[charIndex]}`);
                    
                    // 标记之前的字符为已处理
                    if (currentIndex > 0) {
                        highlightChar('s', currentIndex - 1, true);
                    }
                    
                    currentIndex++;
                    
                    if (currentIndex >= s.length) {
                        currentPhase = 2;
                        currentIndex = 0;
                        setTimeout(() => {
                            // 清除高亮
                            document.querySelectorAll('.array-value').forEach(cell => {
                                cell.classList.remove('highlight');
                            });
                            highlightChar('s', s.length - 1, true);
                        }, 1500);
                    }
                } 
            } else if (currentPhase === 2) {
                // 处理字符串T
                if (currentIndex === 0) {
                    updateStepInfo(currentStep, `开始处理字符串 T = "${t}"。对于每个字符，我们将在对应的数组位置上-1。`);
                    currentIndex++;
                    return;
                }
                
                const realIndex = currentIndex - 1;
                if (realIndex < t.length) {
                    const char = t[realIndex];
                    const charIndex = char.charCodeAt(0) - 97;
                    
                    record[charIndex]--;
                    
                    highlightChar('t', realIndex);
                    updateArray(charIndex, record[charIndex], true);
                    
                    updateStepInfo(currentStep, 
                        `处理字符 '${char}' (索引 ${charIndex})：record[${charIndex}] = ${record[charIndex]}`);
                    
                    // 标记之前的字符为已处理
                    if (realIndex > 0) {
                        highlightChar('t', realIndex - 1, true);
                    }
                    
                    currentIndex++;
                    
                    if (realIndex >= t.length - 1) {
                        currentPhase = 3;
                        currentIndex = 0;
                        setTimeout(() => {
                            // 清除高亮
                            document.querySelectorAll('.array-value').forEach(cell => {
                                cell.classList.remove('highlight');
                            });
                            highlightChar('t', t.length - 1, true);
                        }, 1500);
                    }
                }
            } else if (currentPhase === 3) {
                // 检查结果
                const isAnagram = record.every(count => count === 0);
                
                updateStepInfo(currentStep, 
                    '检查record数组中的所有元素。如果所有元素都为0，说明两个字符串是字母异位词；否则不是。');
                
                // 显示结果
                const resultSection = document.getElementById('resultSection');
                const resultTitle = document.getElementById('resultTitle');
                const resultText = document.getElementById('resultText');
                
                if (isAnagram) {
                    resultSection.className = 'result-section result-true';
                    resultTitle.textContent = '✅ 是字母异位词！';
                    resultText.textContent = 'record数组中所有元素都为0，说明两个字符串包含相同的字符且每个字符出现的次数相等。';
                } else {
                    resultSection.className = 'result-section result-false';
                    resultTitle.textContent = '❌ 不是字母异位词！';
                    const nonZeroElements = record.map((count, index) => 
                        count !== 0 ? `${String.fromCharCode(97 + index)}:${count}` : null
                    ).filter(item => item !== null);
                    resultText.textContent = `record数组中有非零元素: ${nonZeroElements.join(', ')}，说明两个字符串的字符组成不同。`;
                }
                
                resultSection.style.display = 'block';
                
                // 禁用下一步按钮
                document.getElementById('nextStepBtn').disabled = true;
                document.getElementById('nextStepBtn').classList.add('btn-disabled');
                
                currentPhase = 4;
            }
        }

        function resetDemo() {
            document.getElementById('demoSection').style.display = 'none';
            document.getElementById('nextStepBtn').disabled = true;
            document.getElementById('nextStepBtn').classList.add('btn-disabled');
            
            currentStep = 0;
            currentPhase = 0;
            currentIndex = 0;
            record = new Array(26).fill(0);
        }

        // 初始化
        window.onload = function() {
            document.getElementById('nextStepBtn').classList.add('btn-disabled');
        };
    </script>
</body>
</html> 