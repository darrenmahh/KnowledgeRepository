<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transformeræ¨¡å‹äº¤äº’å¼å­¦ä¹ ç½‘ç«™</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-content {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .navigation {
            background: #2c3e50;
            padding: 15px 0;
            text-align: center;
        }

        .nav-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 0 5px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .nav-btn.active {
            background: #e74c3c;
        }

        .content-area {
            padding: 30px;
            min-height: 600px;
        }

        .step {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .step.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .step-title {
            color: #2c3e50;
            font-size: 2em;
            margin-bottom: 20px;
            text-align: center;
        }

        .step-content {
            line-height: 1.6;
            font-size: 16px;
        }

        .transformer-diagram {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .component {
            background: #3498db;
            color: white;
            padding: 10px 15px;
            margin: 5px;
            border-radius: 8px;
            display: inline-block;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .component:hover {
            background: #2980b9;
            transform: scale(1.05);
        }

        .component.highlighted {
            background: #e74c3c;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .next-btn {
            background: #27ae60;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .next-btn:hover {
            background: #229954;
            transform: translateY(-2px);
        }

        .matrix-visual {
            display: grid;
            gap: 2px;
            margin: 20px 0;
            justify-content: center;
        }

        .matrix-cell {
            width: 30px;
            height: 30px;
            background: #ecf0f1;
            border: 1px solid #bdc3c7;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            transition: background-color 0.3s ease;
        }

        .matrix-cell.active {
            background: #3498db;
            color: white;
        }

        .explanation-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .formula {
            background: #f8f9fa;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }

        .demo-step {
            display: inline-block;
            padding: 8px 15px;
            margin: 0 5px;
            background: #ecf0f1;
            color: #7f8c8d;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .demo-step.active {
            background: #3498db;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(52, 152, 219, 0.3);
        }

        .generation-step {
            opacity: 0.7;
            transition: all 0.3s ease;
        }

        .generation-step:hover {
            opacity: 1;
            transform: translateX(5px);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¤– Transformeræ¨¡å‹äº¤äº’å¼å­¦ä¹ </h1>
            <p>é€šè¿‡é€æ­¥ç‚¹å‡»æ·±å…¥ç†è§£Transformerçš„å·¥ä½œåŸç†</p>
        </div>

        <div class="main-content">
            <div class="navigation">
                <button class="nav-btn active" onclick="showStep(0)">æ¦‚è¿°</button>
                <button class="nav-btn" onclick="showStep(1)">è¾“å…¥å¤„ç†</button>
                <button class="nav-btn" onclick="showStep(2)">ä½ç½®ç¼–ç </button>
                <button class="nav-btn" onclick="showStep(3)">è‡ªæ³¨æ„åŠ›</button>
                <button class="nav-btn" onclick="showStep(4)">å¤šå¤´æ³¨æ„åŠ›</button>
                <button class="nav-btn" onclick="showStep(5)">å‰é¦ˆç½‘ç»œ</button>
                <button class="nav-btn" onclick="showStep(6)">è§£ç å™¨</button>
                <button class="nav-btn" onclick="showStep(7)">å®Œæ•´æµç¨‹</button>
            </div>

            <div class="content-area">
                <!-- æ­¥éª¤0: æ¦‚è¿° -->
                <div class="step active" id="step-0">
                    <h2 class="step-title">Transformeræ¨¡å‹æ¦‚è¿°</h2>
                    <div class="step-content">
                        <p>Transformeræ˜¯ä¸€ä¸ªé©å‘½æ€§çš„æ·±åº¦å­¦ä¹ æ¶æ„ï¼Œç”±Vaswaniç­‰äººåœ¨2017å¹´çš„è®ºæ–‡"Attention Is All You Need"ä¸­æå‡ºã€‚</p>
                        
                        <div class="transformer-diagram">
                            <h3>Transformeræ•´ä½“æ¶æ„</h3>
                            <div style="display: flex; justify-content: space-around; margin-top: 20px;">
                                <div style="text-align: center;">
                                    <h4>ç¼–ç å™¨ (Encoder)</h4>
                                    <div class="component" onclick="highlightComponent(this)">è¾“å…¥åµŒå…¥</div><br>
                                    <div class="component" onclick="highlightComponent(this)">ä½ç½®ç¼–ç </div><br>
                                    <div class="component" onclick="highlightComponent(this)">å¤šå¤´è‡ªæ³¨æ„åŠ›</div><br>
                                    <div class="component" onclick="highlightComponent(this)">å‰é¦ˆç½‘ç»œ</div><br>
                                    <div style="font-size: 12px; margin-top: 10px;">Ã— 6 å±‚</div>
                                </div>
                                <div style="text-align: center;">
                                    <h4>è§£ç å™¨ (Decoder)</h4>
                                    <div class="component" onclick="highlightComponent(this)">è¾“å‡ºåµŒå…¥</div><br>
                                    <div class="component" onclick="highlightComponent(this)">ä½ç½®ç¼–ç </div><br>
                                    <div class="component" onclick="highlightComponent(this)">æ©ç è‡ªæ³¨æ„åŠ›</div><br>
                                    <div class="component" onclick="highlightComponent(this)">ç¼–ç å™¨-è§£ç å™¨æ³¨æ„åŠ›</div><br>
                                    <div class="component" onclick="highlightComponent(this)">å‰é¦ˆç½‘ç»œ</div><br>
                                    <div style="font-size: 12px; margin-top: 10px;">Ã— 6 å±‚</div>
                                </div>
                            </div>
                        </div>

                        <div class="explanation-box">
                            <h4>ğŸ”‘ æ ¸å¿ƒåˆ›æ–°ç‚¹ï¼š</h4>
                            <ul>
                                <li><strong>è‡ªæ³¨æ„åŠ›æœºåˆ¶</strong>ï¼šå…è®¸æ¨¡å‹åŒæ—¶å…³æ³¨åºåˆ—ä¸­çš„æ‰€æœ‰ä½ç½®</li>
                                <li><strong>å¹¶è¡Œè®¡ç®—</strong>ï¼šä¸åƒRNNéœ€è¦é¡ºåºå¤„ç†ï¼Œå¯ä»¥å¹¶è¡Œè®¡ç®—</li>
                                <li><strong>ä½ç½®ç¼–ç </strong>ï¼šé€šè¿‡æ•°å­¦å‡½æ•°ä¸ºæ¯ä¸ªä½ç½®æ·»åŠ å”¯ä¸€æ ‡è¯†</li>
                                <li><strong>å¤šå¤´æ³¨æ„åŠ›</strong>ï¼šä»å¤šä¸ªè§’åº¦åŒæ—¶å…³æ³¨ä¸åŒçš„ä¿¡æ¯</li>
                            </ul>
                        </div>

                        <button class="next-btn" onclick="showStep(1)">å¼€å§‹å­¦ä¹  â†’</button>
                    </div>
                </div>

                <!-- æ­¥éª¤1: è¾“å…¥å¤„ç† -->
                <div class="step" id="step-1">
                    <h2 class="step-title">æ­¥éª¤1: è¾“å…¥å¤„ç†ä¸è¯åµŒå…¥</h2>
                    <div class="step-content">
                        <p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å°†è¾“å…¥çš„æ–‡æœ¬è½¬æ¢ä¸ºæ¨¡å‹å¯ä»¥ç†è§£çš„æ•°å­—è¡¨ç¤ºã€‚</p>
                        
                        <div class="transformer-diagram">
                            <h3>ğŸ”„ ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æŸ¥çœ‹è¾“å…¥å¤„ç†è¿‡ç¨‹</h3>
                            <div id="input-demo">
                                <div style="margin: 20px 0;">
                                    <button class="component" onclick="showTokenization()">1. åˆ†è¯ (Tokenization)</button>
                                    <button class="component" onclick="showEmbedding()">2. è¯åµŒå…¥ (Embedding)</button>
                                    <button class="component" onclick="showInputComplete()">3. å®Œæ•´æµç¨‹</button>
                                </div>
                                
                                <div id="demo-area" style="min-height: 200px; background: #f8f9fa; padding: 20px; border-radius: 8px;">
                                    <p>ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹æ¼”ç¤º...</p>
                                </div>
                            </div>
                        </div>

                        <div class="explanation-box">
                            <h4>ğŸ“ è¾“å…¥å¤„ç†çš„é‡è¦æ€§ï¼š</h4>
                            <ul>
                                <li><strong>åˆ†è¯</strong>ï¼šå°†å¥å­åˆ†è§£ä¸ºæ›´å°çš„å•å…ƒï¼ˆè¯æˆ–å­è¯ï¼‰</li>
                                <li><strong>è¯æ±‡è¡¨</strong>ï¼šå»ºç«‹è¯æ±‡åˆ°ç´¢å¼•çš„æ˜ å°„</li>
                                <li><strong>è¯åµŒå…¥</strong>ï¼šå°†ç¦»æ•£çš„è¯æ±‡ç´¢å¼•è½¬æ¢ä¸ºè¿ç»­çš„å‘é‡è¡¨ç¤º</li>
                                <li><strong>ç»´åº¦</strong>ï¼šé€šå¸¸ä½¿ç”¨512ç»´çš„å‘é‡è¡¨ç¤ºæ¯ä¸ªè¯</li>
                            </ul>
                        </div>

                        <div class="formula">
                            <strong>æ•°å­¦è¡¨ç¤ºï¼š</strong><br>
                            è¾“å…¥åºåˆ—: ["æˆ‘", "çˆ±", "æœºå™¨", "å­¦ä¹ "] <br>
                            è¯æ±‡ç´¢å¼•: [123, 456, 789, 012] <br>
                            åµŒå…¥çŸ©é˜µ: E âˆˆ â„^(VÃ—d_model) <br>
                            è¾“å‡º: X = E[tokens] âˆˆ â„^(seq_lenÃ—d_model)
                        </div>

                        <button class="next-btn" onclick="showStep(2)">ä¸‹ä¸€æ­¥: ä½ç½®ç¼–ç  â†’</button>
                    </div>
                </div>

                <!-- æ­¥éª¤2: ä½ç½®ç¼–ç  -->
                <div class="step" id="step-2">
                    <h2 class="step-title">æ­¥éª¤2: ä½ç½®ç¼–ç  (Positional Encoding)</h2>
                    <div class="step-content">
                        <p>ç”±äºTransformeræ²¡æœ‰å¾ªç¯ç»“æ„ï¼Œæˆ‘ä»¬éœ€è¦æ˜¾å¼åœ°å‘Šè¯‰æ¨¡å‹è¯è¯­åœ¨åºåˆ—ä¸­çš„ä½ç½®ä¿¡æ¯ã€‚</p>
                        
                        <div class="transformer-diagram">
                            <h3>ğŸ¯ ç‚¹å‡»ä½“éªŒä½ç½®ç¼–ç </h3>
                            <div style="margin: 20px 0;">
                                <button class="component" onclick="showPositionDemo()">æŸ¥çœ‹ä½ç½®ç¼–ç å¯è§†åŒ–</button>
                                <button class="component" onclick="showPositionFormula()">ä½ç½®ç¼–ç å…¬å¼</button>
                                <button class="component" onclick="showPositionAddition()">ä¸è¯åµŒå…¥ç›¸åŠ </button>
                            </div>
                            
                            <div id="position-demo" style="min-height: 250px; background: #f8f9fa; padding: 20px; border-radius: 8px;">
                                <p>ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æŸ¥çœ‹ä½ç½®ç¼–ç æ¼”ç¤º...</p>
                            </div>
                        </div>

                        <div class="explanation-box">
                            <h4>ğŸª ä½ç½®ç¼–ç çš„è®¾è®¡åŸç†ï¼š</h4>
                            <ul>
                                <li><strong>æ­£å¼¦å’Œä½™å¼¦å‡½æ•°</strong>ï¼šä½¿ç”¨ä¸åŒé¢‘ç‡çš„ä¸‰è§’å‡½æ•°</li>
                                <li><strong>å”¯ä¸€æ€§</strong>ï¼šæ¯ä¸ªä½ç½®éƒ½æœ‰å”¯ä¸€çš„ç¼–ç </li>
                                <li><strong>ç›¸å¯¹ä½ç½®</strong>ï¼šæ¨¡å‹å¯ä»¥å­¦ä¹ ç›¸å¯¹ä½ç½®å…³ç³»</li>
                                <li><strong>å¤–æ¨æ€§</strong>ï¼šå¯ä»¥å¤„ç†æ¯”è®­ç»ƒæ—¶æ›´é•¿çš„åºåˆ—</li>
                            </ul>
                        </div>

                        <div class="formula">
                            <strong>ä½ç½®ç¼–ç å…¬å¼ï¼š</strong><br>
                            PE(pos, 2i) = sin(pos / 10000^(2i/d_model))<br>
                            PE(pos, 2i+1) = cos(pos / 10000^(2i/d_model))<br><br>
                            æœ€ç»ˆè¾“å…¥: Input = Embedding + Positional_Encoding
                        </div>

                        <button class="next-btn" onclick="showStep(3)">ä¸‹ä¸€æ­¥: è‡ªæ³¨æ„åŠ›æœºåˆ¶ â†’</button>
                    </div>
                </div>

                <!-- æ­¥éª¤3: è‡ªæ³¨æ„åŠ› -->
                <div class="step" id="step-3">
                    <h2 class="step-title">æ­¥éª¤3: è‡ªæ³¨æ„åŠ›æœºåˆ¶ (Self-Attention)</h2>
                    <div class="step-content">
                        <p>è‡ªæ³¨æ„åŠ›æ˜¯Transformerçš„æ ¸å¿ƒï¼Œå®ƒå…è®¸æ¨¡å‹å…³æ³¨åºåˆ—ä¸­çš„ä»»ä½•ä½ç½®æ¥ç¼–ç å½“å‰ä½ç½®çš„è¡¨ç¤ºã€‚</p>
                        
                        <div class="transformer-diagram">
                            <h3>ğŸ§  äº¤äº’å¼è‡ªæ³¨æ„åŠ›æ¼”ç¤º</h3>
                            <div style="margin: 20px 0;">
                                <button class="component" onclick="showQKV()">1. ç”ŸæˆQã€Kã€V</button>
                                <button class="component" onclick="showAttentionScore()">2. è®¡ç®—æ³¨æ„åŠ›åˆ†æ•°</button>
                                <button class="component" onclick="showSoftmax()">3. Softmaxå½’ä¸€åŒ–</button>
                                <button class="component" onclick="showWeightedSum()">4. åŠ æƒæ±‚å’Œ</button>
                            </div>
                            
                            <div id="attention-demo" style="min-height: 300px; background: #f8f9fa; padding: 20px; border-radius: 8px;">
                                <p>ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®é€æ­¥äº†è§£è‡ªæ³¨æ„åŠ›è®¡ç®—è¿‡ç¨‹...</p>
                            </div>
                        </div>

                        <div class="explanation-box">
                            <h4>ğŸ­ è‡ªæ³¨æ„åŠ›çš„å·¥ä½œåŸç†ï¼š</h4>
                            <ul>
                                <li><strong>Query (Q)</strong>ï¼šæŸ¥è¯¢å‘é‡ï¼Œè¡¨ç¤º"æˆ‘æƒ³è¦ä»€ä¹ˆä¿¡æ¯"</li>
                                <li><strong>Key (K)</strong>ï¼šé”®å‘é‡ï¼Œè¡¨ç¤º"æˆ‘æœ‰ä»€ä¹ˆä¿¡æ¯"</li>
                                <li><strong>Value (V)</strong>ï¼šå€¼å‘é‡ï¼Œè¡¨ç¤º"æˆ‘å®é™…çš„ä¿¡æ¯å†…å®¹"</li>
                                <li><strong>æ³¨æ„åŠ›æƒé‡</strong>ï¼šå†³å®šæ¯ä¸ªä½ç½®å¯¹å½“å‰ä½ç½®çš„é‡è¦ç¨‹åº¦</li>
                            </ul>
                        </div>

                        <div class="formula">
                            <strong>è‡ªæ³¨æ„åŠ›å…¬å¼ï¼š</strong><br>
                            Q = XW_Q, K = XW_K, V = XW_V<br>
                            Attention(Q,K,V) = softmax(QK^T/âˆšd_k)V<br><br>
                            å…¶ä¸­ d_k = d_model / num_heads
                        </div>

                        <button class="next-btn" onclick="showStep(4)">ä¸‹ä¸€æ­¥: å¤šå¤´æ³¨æ„åŠ› â†’</button>
                    </div>
                </div>

                <!-- æ­¥éª¤4: å¤šå¤´æ³¨æ„åŠ› -->
                <div class="step" id="step-4">
                    <h2 class="step-title">æ­¥éª¤4: å¤šå¤´æ³¨æ„åŠ› (Multi-Head Attention)</h2>
                    <div class="step-content">
                        <p>å¤šå¤´æ³¨æ„åŠ›å…è®¸æ¨¡å‹ä»å¤šä¸ªè§’åº¦åŒæ—¶å…³æ³¨ä¸åŒçš„ä¿¡æ¯å­ç©ºé—´ã€‚</p>
                        
                        <div class="transformer-diagram">
                            <h3>ğŸ‘¥ å¤šå¤´æ³¨æ„åŠ›å¯è§†åŒ–</h3>
                            <div style="margin: 20px 0;">
                                <button class="component" onclick="showMultiHead()">æŸ¥çœ‹å¤šå¤´ç»“æ„</button>
                                <button class="component" onclick="showHeadComparison()">å¯¹æ¯”ä¸åŒæ³¨æ„åŠ›å¤´</button>
                                <button class="component" onclick="showConcatenation()">æ‹¼æ¥ä¸çº¿æ€§å˜æ¢</button>
                            </div>
                            
                            <div id="multihead-demo" style="min-height: 300px; background: #f8f9fa; padding: 20px; border-radius: 8px;">
                                <p>ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æ¢ç´¢å¤šå¤´æ³¨æ„åŠ›...</p>
                            </div>
                        </div>

                        <div class="explanation-box">
                            <h4>ğŸ”„ å¤šå¤´æ³¨æ„åŠ›çš„ä¼˜åŠ¿ï¼š</h4>
                            <ul>
                                <li><strong>å¤šè§’åº¦å­¦ä¹ </strong>ï¼šæ¯ä¸ªå¤´å¯ä»¥å­¦ä¹ ä¸åŒç±»å‹çš„å…³ç³»</li>
                                <li><strong>ä¿¡æ¯æ•´åˆ</strong>ï¼šç»„åˆæ¥è‡ªå¤šä¸ªå¤´çš„ä¿¡æ¯</li>
                                <li><strong>å‚æ•°æ•ˆç‡</strong>ï¼šæ¯ä¸ªå¤´ä½¿ç”¨è¾ƒå°çš„ç»´åº¦</li>
                                <li><strong>å¹¶è¡Œè®¡ç®—</strong>ï¼šæ‰€æœ‰å¤´å¯ä»¥å¹¶è¡Œè®¡ç®—</li>
                            </ul>
                        </div>

                        <div class="formula">
                            <strong>å¤šå¤´æ³¨æ„åŠ›å…¬å¼ï¼š</strong><br>
                            MultiHead(Q,K,V) = Concat(head_1, ..., head_h)W^O<br>
                            å…¶ä¸­ head_i = Attention(QW_i^Q, KW_i^K, VW_i^V)<br>
                            é€šå¸¸ä½¿ç”¨ h = 8 ä¸ªæ³¨æ„åŠ›å¤´
                        </div>

                        <button class="next-btn" onclick="showStep(5)">ä¸‹ä¸€æ­¥: å‰é¦ˆç½‘ç»œ â†’</button>
                    </div>
                </div>

                <!-- æ­¥éª¤5: å‰é¦ˆç½‘ç»œ -->
                <div class="step" id="step-5">
                    <h2 class="step-title">æ­¥éª¤5: å‰é¦ˆç½‘ç»œ (Feed Forward Network)</h2>
                    <div class="step-content">
                        <p>æ¯ä¸ªTransformerå±‚è¿˜åŒ…å«ä¸€ä¸ªä½ç½®çº§åˆ«çš„å‰é¦ˆç½‘ç»œï¼Œç”¨äºè¿›ä¸€æ­¥å¤„ç†æ³¨æ„åŠ›æœºåˆ¶çš„è¾“å‡ºã€‚</p>
                        
                        <div class="transformer-diagram">
                            <h3>âš¡ å‰é¦ˆç½‘ç»œç»“æ„</h3>
                            <div style="margin: 20px 0;">
                                <button class="component" onclick="showFFNStructure()">ç½‘ç»œç»“æ„</button>
                                <button class="component" onclick="showReLUActivation()">ReLUæ¿€æ´»å‡½æ•°</button>
                                <button class="component" onclick="showResidualConnection()">æ®‹å·®è¿æ¥</button>
                                <button class="component" onclick="showLayerNorm()">å±‚å½’ä¸€åŒ–</button>
                            </div>
                            
                            <div id="ffn-demo" style="min-height: 300px; background: #f8f9fa; padding: 20px; border-radius: 8px;">
                                <p>ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®äº†è§£å‰é¦ˆç½‘ç»œ...</p>
                            </div>
                        </div>

                        <div class="explanation-box">
                            <h4>ğŸ—ï¸ å‰é¦ˆç½‘ç»œçš„ç»„æˆï¼š</h4>
                            <ul>
                                <li><strong>ä¸¤å±‚å…¨è¿æ¥</strong>ï¼šå…ˆæ‰©å±•åˆ°4å€ç»´åº¦ï¼Œå†å‹ç¼©å›åŸç»´åº¦</li>
                                <li><strong>ReLUæ¿€æ´»</strong>ï¼šå¢åŠ éçº¿æ€§èƒ½åŠ›</li>
                                <li><strong>æ®‹å·®è¿æ¥</strong>ï¼šå¸®åŠ©æ¢¯åº¦ä¼ æ’­ï¼Œé¿å…æ¢¯åº¦æ¶ˆå¤±</li>
                                <li><strong>å±‚å½’ä¸€åŒ–</strong>ï¼šç¨³å®šè®­ç»ƒè¿‡ç¨‹</li>
                            </ul>
                        </div>

                        <div class="formula">
                            <strong>å‰é¦ˆç½‘ç»œå…¬å¼ï¼š</strong><br>
                            FFN(x) = max(0, xW_1 + b_1)W_2 + b_2<br>
                            LayerNorm(x + Sublayer(x))<br>
                            å…¶ä¸­ Sublayer(x) æ˜¯å¤šå¤´æ³¨æ„åŠ›æˆ–FFN
                        </div>

                        <button class="next-btn" onclick="showStep(6)">ä¸‹ä¸€æ­¥: è§£ç å™¨ â†’</button>
                    </div>
                </div>

                <!-- æ­¥éª¤6: è§£ç å™¨ -->
                <div class="step" id="step-6">
                    <h2 class="step-title">æ­¥éª¤6: è§£ç å™¨ (Decoder)</h2>
                    <div class="step-content">
                        <p>è§£ç å™¨ç”¨äºç”Ÿæˆè¾“å‡ºåºåˆ—ï¼Œå®ƒæ¯”ç¼–ç å™¨å¤šäº†ä¸€ä¸ªæ©ç è‡ªæ³¨æ„åŠ›å±‚å’Œç¼–ç å™¨-è§£ç å™¨æ³¨æ„åŠ›å±‚ã€‚</p>
                        
                        <div class="transformer-diagram">
                            <h3>ğŸ¯ è§£ç å™¨å·¥ä½œæµç¨‹</h3>
                            <div style="margin: 20px 0;">
                                <button class="component" onclick="showMaskedAttention()">æ©ç è‡ªæ³¨æ„åŠ›</button>
                                <button class="component" onclick="showCrossAttention()">äº¤å‰æ³¨æ„åŠ›</button>
                                <button class="component" onclick="showAutoregressive()">è‡ªå›å½’ç”Ÿæˆ</button>
                                <button class="component" onclick="showOutputProjection()">è¾“å‡ºæŠ•å½±</button>
                            </div>
                            
                            <div id="decoder-demo" style="min-height: 300px; background: #f8f9fa; padding: 20px; border-radius: 8px;">
                                <p>ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®äº†è§£è§£ç å™¨å·¥ä½œåŸç†...</p>
                            </div>
                        </div>

                        <div class="explanation-box">
                            <h4>ğŸª è§£ç å™¨çš„ç‰¹æ®Šè®¾è®¡ï¼š</h4>
                            <ul>
                                <li><strong>æ©ç æœºåˆ¶</strong>ï¼šé˜²æ­¢æ¨¡å‹çœ‹åˆ°æœªæ¥çš„ä¿¡æ¯</li>
                                <li><strong>äº¤å‰æ³¨æ„åŠ›</strong>ï¼šè®©è§£ç å™¨å…³æ³¨ç¼–ç å™¨çš„è¾“å‡º</li>
                                <li><strong>è‡ªå›å½’ç”Ÿæˆ</strong>ï¼šé€ä¸ªç”Ÿæˆè¾“å‡ºtoken</li>
                                <li><strong>æ•™å¸ˆå¼ºåˆ¶</strong>ï¼šè®­ç»ƒæ—¶ä½¿ç”¨çœŸå®ç›®æ ‡åºåˆ—</li>
                            </ul>
                        </div>

                        <div class="formula">
                            <strong>è§£ç å™¨å…³é”®å…¬å¼ï¼š</strong><br>
                            æ©ç æ³¨æ„åŠ›: Attention(Q,K,V) with future masking<br>
                            äº¤å‰æ³¨æ„åŠ›: Attention(Q_dec, K_enc, V_enc)<br>
                            è¾“å‡ºæ¦‚ç‡: P(y_t) = softmax(W_o Â· h_t + b_o)
                        </div>

                        <button class="next-btn" onclick="showStep(7)">ä¸‹ä¸€æ­¥: å®Œæ•´æµç¨‹ â†’</button>
                    </div>
                </div>

                <!-- æ­¥éª¤7: å®Œæ•´æµç¨‹ -->
                <div class="step" id="step-7">
                    <h2 class="step-title">æ­¥éª¤7: Transformerå®Œæ•´å·¥ä½œæµç¨‹</h2>
                    <div class="step-content">
                        <p>ç°åœ¨è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­æ¥ç†è§£Transformerå¦‚ä½•å°†è¾“å…¥åºåˆ—è½¬æ¢ä¸ºè¾“å‡ºåºåˆ—ã€‚</p>
                        
                        <div class="transformer-diagram">
                            <h3>ğŸ”„ å®Œæ•´æµç¨‹æ¼”ç¤º</h3>
                            <div style="margin: 20px 0;">
                                <button class="component" onclick="startFullDemo()">å¼€å§‹å®Œæ•´æ¼”ç¤º</button>
                                <button class="component" onclick="resetDemo()">é‡ç½®æ¼”ç¤º</button>
                            </div>
                            
                            <div id="full-demo" style="min-height: 400px; background: #f8f9fa; padding: 20px; border-radius: 8px;">
                                <div id="demo-step-indicator" style="text-align: center; margin-bottom: 20px;">
                                    <span class="demo-step active" id="demo-step-0">è¾“å…¥å¤„ç†</span>
                                    <span class="demo-step" id="demo-step-1">ç¼–ç å™¨</span>
                                    <span class="demo-step" id="demo-step-2">è§£ç å™¨</span>
                                    <span class="demo-step" id="demo-step-3">è¾“å‡ºç”Ÿæˆ</span>
                                </div>
                                <div id="demo-content">
                                    <p>ç‚¹å‡»"å¼€å§‹å®Œæ•´æ¼”ç¤º"æŸ¥çœ‹Transformerå¤„ç†è¿‡ç¨‹...</p>
                                </div>
                            </div>
                        </div>

                        <div class="explanation-box">
                            <h4>ğŸ“ å­¦ä¹ æ€»ç»“ï¼š</h4>
                            <ul>
                                <li><strong>å¹¶è¡Œæ€§</strong>ï¼šç¼–ç å™¨å¯ä»¥å¹¶è¡Œå¤„ç†æ•´ä¸ªåºåˆ—</li>
                                <li><strong>é•¿è·ç¦»ä¾èµ–</strong>ï¼šæ³¨æ„åŠ›æœºåˆ¶ç›´æ¥è¿æ¥ä»»æ„ä½ç½®</li>
                                <li><strong>å¯è§£é‡Šæ€§</strong>ï¼šæ³¨æ„åŠ›æƒé‡æä¾›äº†æ¨¡å‹å…³æ³¨ç‚¹çš„ç›´è§‚ç†è§£</li>
                                <li><strong>çµæ´»æ€§</strong>ï¼šå¯ä»¥é€‚åº”å„ç§åºåˆ—åˆ°åºåˆ—çš„ä»»åŠ¡</li>
                            </ul>
                        </div>

                        <div style="text-align: center; margin-top: 30px;">
                            <h3>ğŸ‰ æ­å–œï¼æ‚¨å·²ç»å®Œæˆäº†Transformeræ¨¡å‹çš„å­¦ä¹ ä¹‹æ—…ï¼</h3>
                            <button class="next-btn" onclick="showStep(0)" style="background: #8e44ad;">è¿”å›æ¦‚è¿°</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 0;
        const totalSteps = 8;

        function showStep(stepIndex) {
            // éšè—æ‰€æœ‰æ­¥éª¤
            for (let i = 0; i < totalSteps; i++) {
                document.getElementById(`step-${i}`).classList.remove('active');
            }
            
            // æ˜¾ç¤ºæŒ‡å®šæ­¥éª¤
            document.getElementById(`step-${stepIndex}`).classList.add('active');
            
            // æ›´æ–°å¯¼èˆªæŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.nav-btn').forEach((btn, index) => {
                btn.classList.toggle('active', index === stepIndex);
            });
            
            currentStep = stepIndex;
        }

        function highlightComponent(element) {
            // ç§»é™¤å…¶ä»–é«˜äº®
            document.querySelectorAll('.component').forEach(comp => {
                comp.classList.remove('highlighted');
            });
            
            // æ·»åŠ é«˜äº®åˆ°ç‚¹å‡»çš„ç»„ä»¶
            element.classList.add('highlighted');
            
            // 3ç§’åç§»é™¤é«˜äº®
            setTimeout(() => {
                element.classList.remove('highlighted');
            }, 3000);
        }

        function nextStep() {
            if (currentStep < totalSteps - 1) {
                showStep(currentStep + 1);
            }
        }

        function prevStep() {
            if (currentStep > 0) {
                showStep(currentStep - 1);
            }
        }

        // æ­¥éª¤1: è¾“å…¥å¤„ç†æ¼”ç¤ºå‡½æ•°
        function showTokenization() {
            const demoArea = document.getElementById('demo-area');
            demoArea.innerHTML = `
                <h4>ğŸ”¤ åˆ†è¯æ¼”ç¤º</h4>
                <div style="background: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
                    <strong>åŸå§‹å¥å­:</strong> "æˆ‘çˆ±æœºå™¨å­¦ä¹ "<br><br>
                    <strong>åˆ†è¯ç»“æœ:</strong>
                    <div style="display: flex; gap: 10px; margin-top: 10px;">
                        <span style="background: #3498db; color: white; padding: 5px 10px; border-radius: 5px;">æˆ‘</span>
                        <span style="background: #3498db; color: white; padding: 5px 10px; border-radius: 5px;">çˆ±</span>
                        <span style="background: #3498db; color: white; padding: 5px 10px; border-radius: 5px;">æœºå™¨</span>
                        <span style="background: #3498db; color: white; padding: 5px 10px; border-radius: 5px;">å­¦ä¹ </span>
                    </div>
                </div>
                <p><strong>è¯´æ˜:</strong> å°†è¿ç»­çš„æ–‡æœ¬åˆ†è§£ä¸ºç‹¬ç«‹çš„è¯æ±‡å•å…ƒï¼Œæ¯ä¸ªå•å…ƒéƒ½ä¼šè·å¾—ä¸€ä¸ªå”¯ä¸€çš„IDã€‚</p>
            `;
        }

        function showEmbedding() {
            const demoArea = document.getElementById('demo-area');
            demoArea.innerHTML = `
                <h4>ğŸ”¢ è¯åµŒå…¥æ¼”ç¤º</h4>
                <div style="background: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
                    <strong>è¯æ±‡IDæ˜ å°„:</strong><br>
                    æˆ‘ â†’ 123 â†’ [0.2, -0.1, 0.8, 0.3, ...]<br>
                    çˆ± â†’ 456 â†’ [0.5, 0.7, -0.2, 0.9, ...]<br>
                    æœºå™¨ â†’ 789 â†’ [-0.3, 0.4, 0.6, -0.1, ...]<br>
                    å­¦ä¹  â†’ 012 â†’ [0.8, -0.5, 0.1, 0.7, ...]<br><br>
                    <div class="matrix-visual" style="grid-template-columns: repeat(8, 1fr); width: 240px;">
                        ${Array(32).fill(0).map((_, i) => 
                            `<div class="matrix-cell ${i % 4 === 0 ? 'active' : ''}">${(Math.random() - 0.5).toFixed(1)}</div>`
                        ).join('')}
                    </div>
                </div>
                <p><strong>è¯´æ˜:</strong> æ¯ä¸ªè¯è¢«è½¬æ¢ä¸ºé«˜ç»´å‘é‡ï¼ˆé€šå¸¸512ç»´ï¼‰ï¼ŒåŒ…å«è¯­ä¹‰ä¿¡æ¯ã€‚</p>
            `;
        }

        function showInputComplete() {
            const demoArea = document.getElementById('demo-area');
            demoArea.innerHTML = `
                <h4>âœ… å®Œæ•´è¾“å…¥å¤„ç†æµç¨‹</h4>
                <div style="background: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
                    <div style="text-align: center;">
                        <div style="margin: 10px 0;">ğŸ“ åŸå§‹æ–‡æœ¬: "æˆ‘çˆ±æœºå™¨å­¦ä¹ "</div>
                        <div style="margin: 10px 0;">â¬‡ï¸</div>
                        <div style="margin: 10px 0;">ğŸ”¤ åˆ†è¯: ["æˆ‘", "çˆ±", "æœºå™¨", "å­¦ä¹ "]</div>
                        <div style="margin: 10px 0;">â¬‡ï¸</div>
                        <div style="margin: 10px 0;">ğŸ”¢ IDåŒ–: [123, 456, 789, 012]</div>
                        <div style="margin: 10px 0;">â¬‡ï¸</div>
                        <div style="margin: 10px 0;">ğŸ“Š åµŒå…¥: 4Ã—512 ç»´çŸ©é˜µ</div>
                    </div>
                </div>
                <p><strong>ç»“æœ:</strong> æ–‡æœ¬è¢«è½¬æ¢ä¸ºæ¨¡å‹å¯ä»¥å¤„ç†çš„æ•°å€¼å¼ é‡ï¼Œå‡†å¤‡è¿›å…¥ä¸‹ä¸€é˜¶æ®µã€‚</p>
            `;
        }

        // æ­¥éª¤2: ä½ç½®ç¼–ç æ¼”ç¤ºå‡½æ•°
        function showPositionDemo() {
            const positionDemo = document.getElementById('position-demo');
            positionDemo.innerHTML = `
                <h4>ğŸ¯ ä½ç½®ç¼–ç å¯è§†åŒ–</h4>
                <div style="background: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
                    <div style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 2px; margin: 20px 0;">
                        ${Array(32).fill(0).map((_, i) => {
                            const pos = Math.floor(i / 8);
                            const dim = i % 8;
                            const value = dim % 2 === 0 ? 
                                Math.sin(pos / Math.pow(10000, dim/8)) : 
                                Math.cos(pos / Math.pow(10000, (dim-1)/8));
                            const intensity = Math.abs(value);
                            return `<div class="matrix-cell" style="background: hsl(${240 + intensity*120}, 70%, ${50 + intensity*30}%); color: white;">${value.toFixed(2)}</div>`;
                        }).join('')}
                    </div>
                    <div style="text-align: center; font-size: 12px;">
                        æ¯è¡Œä»£è¡¨ä¸€ä¸ªä½ç½®ï¼Œæ¯åˆ—ä»£è¡¨ä¸€ä¸ªç»´åº¦
                    </div>
                </div>
                <p><strong>è¯´æ˜:</strong> ä¸åŒä½ç½®äº§ç”Ÿä¸åŒçš„ç¼–ç æ¨¡å¼ï¼Œå¸®åŠ©æ¨¡å‹ç†è§£è¯è¯­çš„é¡ºåºã€‚</p>
            `;
        }

        function showPositionFormula() {
            const positionDemo = document.getElementById('position-demo');
            positionDemo.innerHTML = `
                <h4>ğŸ“ ä½ç½®ç¼–ç å…¬å¼è¯¦è§£</h4>
                <div style="background: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
                    <div style="font-family: 'Courier New', monospace; font-size: 14px;">
                        PE(pos, 2i) = sin(pos / 10000^(2i/d_model))<br>
                        PE(pos, 2i+1) = cos(pos / 10000^(2i/d_model))<br><br>
                        
                        å…¶ä¸­ï¼š<br>
                        â€¢ pos: ä½ç½®ç´¢å¼• (0, 1, 2, ...)<br>
                        â€¢ i: ç»´åº¦ç´¢å¼• (0, 1, 2, ..., d_model/2)<br>
                        â€¢ d_model: æ¨¡å‹ç»´åº¦ (é€šå¸¸ä¸º512)<br><br>
                        
                        ç¤ºä¾‹è®¡ç®— (pos=1, i=0):<br>
                        PE(1, 0) = sin(1 / 10000^(0/512)) = sin(1) â‰ˆ 0.841<br>
                        PE(1, 1) = cos(1 / 10000^(0/512)) = cos(1) â‰ˆ 0.540
                    </div>
                </div>
                <p><strong>ç‰¹ç‚¹:</strong> ä½¿ç”¨ä¸‰è§’å‡½æ•°ç¡®ä¿æ¯ä¸ªä½ç½®éƒ½æœ‰å”¯ä¸€çš„ç¼–ç æ¨¡å¼ã€‚</p>
            `;
        }

        function showPositionAddition() {
            const positionDemo = document.getElementById('position-demo');
            positionDemo.innerHTML = `
                <h4>â• ä½ç½®ç¼–ç ä¸è¯åµŒå…¥ç›¸åŠ </h4>
                <div style="background: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
                    <div style="display: flex; justify-content: space-around; align-items: center;">
                        <div style="text-align: center;">
                            <div style="font-weight: bold;">è¯åµŒå…¥</div>
                            <div class="matrix-visual" style="grid-template-columns: repeat(4, 1fr); margin: 10px 0;">
                                ${[0.2, -0.1, 0.8, 0.3, 0.5, 0.7, -0.2, 0.9].map(v => 
                                    `<div class="matrix-cell">${v}</div>`
                                ).join('')}
                            </div>
                            <div style="font-size: 12px;">è¯­ä¹‰ä¿¡æ¯</div>
                        </div>
                        
                        <div style="font-size: 24px;">+</div>
                        
                        <div style="text-align: center;">
                            <div style="font-weight: bold;">ä½ç½®ç¼–ç </div>
                            <div class="matrix-visual" style="grid-template-columns: repeat(4, 1fr); margin: 10px 0;">
                                ${[0.0, 1.0, 0.1, 0.9, 0.2, 0.8, 0.3, 0.7].map(v => 
                                    `<div class="matrix-cell" style="background: #e74c3c; color: white;">${v}</div>`
                                ).join('')}
                            </div>
                            <div style="font-size: 12px;">ä½ç½®ä¿¡æ¯</div>
                        </div>
                        
                        <div style="font-size: 24px;">=</div>
                        
                        <div style="text-align: center;">
                            <div style="font-weight: bold;">æœ€ç»ˆè¾“å…¥</div>
                            <div class="matrix-visual" style="grid-template-columns: repeat(4, 1fr); margin: 10px 0;">
                                ${[0.2, 0.9, 0.9, 1.2, 0.7, 1.5, 0.1, 1.6].map(v => 
                                    `<div class="matrix-cell" style="background: #27ae60; color: white;">${v}</div>`
                                ).join('')}
                            </div>
                            <div style="font-size: 12px;">è¯­ä¹‰+ä½ç½®</div>
                        </div>
                    </div>
                </div>
                <p><strong>ç»“æœ:</strong> èåˆäº†è¯­ä¹‰å’Œä½ç½®ä¿¡æ¯çš„å®Œæ•´è¡¨ç¤ºï¼Œå‡†å¤‡è¿›å…¥æ³¨æ„åŠ›å±‚ã€‚</p>
            `;
        }

        // æ­¥éª¤3: è‡ªæ³¨æ„åŠ›æ¼”ç¤ºå‡½æ•°
        function showQKV() {
            const attentionDemo = document.getElementById('attention-demo');
            attentionDemo.innerHTML = `
                <h4>ğŸ”‘ ç”ŸæˆQueryã€Keyã€ValueçŸ©é˜µ</h4>
                <div style="background: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
                    <div style="display: flex; justify-content: space-around;">
                        <div style="text-align: center;">
                            <div style="font-weight: bold; color: #e74c3c;">Query (Q)</div>
                            <div style="font-size: 12px;">æˆ‘æƒ³è¦ä»€ä¹ˆä¿¡æ¯?</div>
                            <div class="matrix-visual" style="grid-template-columns: repeat(3, 1fr); margin: 10px 0;">
                                ${[0.2, 0.8, -0.1, 0.5, -0.3, 0.9, 0.7, 0.1, -0.5].map(v => 
                                    `<div class="matrix-cell" style="background: #e74c3c; color: white;">${v}</div>`
                                ).join('')}
                            </div>
                        </div>
                        
                        <div style="text-align: center;">
                            <div style="font-weight: bold; color: #3498db;">Key (K)</div>
                            <div style="font-size: 12px;">æˆ‘æœ‰ä»€ä¹ˆä¿¡æ¯?</div>
                            <div class="matrix-visual" style="grid-template-columns: repeat(3, 1fr); margin: 10px 0;">
                                ${[0.1, -0.2, 0.6, 0.8, 0.3, -0.1, -0.4, 0.7, 0.2].map(v => 
                                    `<div class="matrix-cell" style="background: #3498db; color: white;">${v}</div>`
                                ).join('')}
                            </div>
                        </div>
                        
                        <div style="text-align: center;">
                            <div style="font-weight: bold; color: #27ae60;">Value (V)</div>
                            <div style="font-size: 12px;">æˆ‘çš„å®é™…å†…å®¹æ˜¯ä»€ä¹ˆ?</div>
                            <div class="matrix-visual" style="grid-template-columns: repeat(3, 1fr); margin: 10px 0;">
                                ${[0.9, 0.2, -0.3, 0.1, 0.8, 0.5, 0.6, -0.2, 0.4].map(v => 
                                    `<div class="matrix-cell" style="background: #27ae60; color: white;">${v}</div>`
                                ).join('')}
                            </div>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 15px; font-size: 14px;">
                        é€šè¿‡å­¦ä¹ åˆ°çš„æƒé‡çŸ©é˜µW_Q, W_K, W_V å°†è¾“å…¥Xè½¬æ¢ä¸ºQ, K, V
                    </div>
                </div>
                <p><strong>è¯´æ˜:</strong> æ¯ä¸ªè¯éƒ½ä¼šç”Ÿæˆè‡ªå·±çš„Queryã€Keyã€Valueå‘é‡ï¼Œç”¨äºè®¡ç®—æ³¨æ„åŠ›ã€‚</p>
            `;
        }

        function showAttentionScore() {
            const attentionDemo = document.getElementById('attention-demo');
            attentionDemo.innerHTML = `
                <h4>ğŸ“Š è®¡ç®—æ³¨æ„åŠ›åˆ†æ•°</h4>
                <div style="background: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <strong>è®¡ç®—å…¬å¼: Score = Q Â· K^T / âˆšd_k</strong>
                    </div>
                    
                    <div style="display: flex; justify-content: center; align-items: center; gap: 20px;">
                        <div>
                            <div style="font-weight: bold;">æ³¨æ„åŠ›åˆ†æ•°çŸ©é˜µ</div>
                            <table style="border-collapse: collapse; margin: 10px 0;">
                                <tr>
                                    <td style="border: 1px solid #ddd; padding: 8px; background: #f8f9fa;"></td>
                                    <td style="border: 1px solid #ddd; padding: 8px; background: #f8f9fa;">æˆ‘</td>
                                    <td style="border: 1px solid #ddd; padding: 8px; background: #f8f9fa;">çˆ±</td>
                                    <td style="border: 1px solid #ddd; padding: 8px; background: #f8f9fa;">æœºå™¨</td>
                                    <td style="border: 1px solid #ddd; padding: 8px; background: #f8f9fa;">å­¦ä¹ </td>
                                </tr>
                                <tr>
                                    <td style="border: 1px solid #ddd; padding: 8px; background: #f8f9fa;">æˆ‘</td>
                                    <td style="border: 1px solid #ddd; padding: 8px; background: #e74c3c; color: white;">0.8</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">0.3</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">0.1</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">0.2</td>
                                </tr>
                                <tr>
                                    <td style="border: 1px solid #ddd; padding: 8px; background: #f8f9fa;">çˆ±</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">0.2</td>
                                    <td style="border: 1px solid #ddd; padding: 8px; background: #e74c3c; color: white;">0.9</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">0.6</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">0.7</td>
                                </tr>
                                <tr>
                                    <td style="border: 1px solid #ddd; padding: 8px; background: #f8f9fa;">æœºå™¨</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">0.1</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">0.4</td>
                                    <td style="border: 1px solid #ddd; padding: 8px; background: #e74c3c; color: white;">0.8</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">0.9</td>
                                </tr>
                                <tr>
                                    <td style="border: 1px solid #ddd; padding: 8px; background: #f8f9fa;">å­¦ä¹ </td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">0.3</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">0.5</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">0.8</td>
                                    <td style="border: 1px solid #ddd; padding: 8px; background: #e74c3c; color: white;">0.7</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div style="text-align: center; font-size: 12px; margin-top: 10px;">
                        å¯¹è§’çº¿å€¼è¾ƒé«˜ï¼Œè¡¨æ˜è¯è¯­æ›´å…³æ³¨è‡ªå·±
                    </div>
                </div>
                <p><strong>è¯´æ˜:</strong> åˆ†æ•°è¶Šé«˜ï¼Œè¡¨ç¤ºå½“å‰è¯å¯¹ç›®æ ‡è¯çš„å…³æ³¨åº¦è¶Šå¤§ã€‚</p>
            `;
        }

        function showSoftmax() {
            const attentionDemo = document.getElementById('attention-demo');
            attentionDemo.innerHTML = `
                <h4>ğŸ¯ Softmaxå½’ä¸€åŒ–</h4>
                <div style="background: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
                    <div style="display: flex; justify-content: space-around; align-items: center;">
                        <div style="text-align: center;">
                            <div style="font-weight: bold;">åŸå§‹åˆ†æ•°</div>
                            <div style="margin: 10px 0;">
                                [0.8, 0.3, 0.1, 0.2]
                            </div>
                        </div>
                        
                        <div style="font-size: 20px;">â†’ Softmax â†’</div>
                        
                        <div style="text-align: center;">
                            <div style="font-weight: bold;">æ³¨æ„åŠ›æƒé‡</div>
                            <div style="margin: 10px 0;">
                                [0.45, 0.27, 0.22, 0.25]
                            </div>
                            <div style="font-size: 12px;">æ€»å’Œ = 1.0</div>
                        </div>
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <div style="font-weight: bold; text-align: center;">å¯è§†åŒ–æƒé‡åˆ†å¸ƒ</div>
                        <div style="display: flex; gap: 10px; justify-content: center; margin: 15px 0;">
                            <div style="text-align: center;">
                                <div style="background: #e74c3c; height: 45px; width: 30px; margin: 0 auto;"></div>
                                <div style="font-size: 12px;">æˆ‘<br>45%</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="background: #3498db; height: 27px; width: 30px; margin: 0 auto;"></div>
                                <div style="font-size: 12px;">çˆ±<br>27%</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="background: #27ae60; height: 22px; width: 30px; margin: 0 auto;"></div>
                                <div style="font-size: 12px;">æœºå™¨<br>22%</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="background: #f39c12; height: 25px; width: 30px; margin: 0 auto;"></div>
                                <div style="font-size: 12px;">å­¦ä¹ <br>25%</div>
                            </div>
                        </div>
                    </div>
                </div>
                <p><strong>è¯´æ˜:</strong> Softmaxç¡®ä¿æ‰€æœ‰æƒé‡å’Œä¸º1ï¼Œå½¢æˆæ¦‚ç‡åˆ†å¸ƒã€‚</p>
            `;
        }

        function showWeightedSum() {
            const attentionDemo = document.getElementById('attention-demo');
            attentionDemo.innerHTML = `
                <h4>ğŸ¯ åŠ æƒæ±‚å’Œå¾—åˆ°è¾“å‡º</h4>
                <div style="background: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <strong>è¾“å‡º = Î£(æƒé‡ Ã— Valueå‘é‡)</strong>
                    </div>
                    
                    <div style="display: flex; justify-content: space-around; align-items: center; font-size: 14px;">
                        <div style="text-align: center;">
                            <div style="color: #e74c3c; font-weight: bold;">0.45 Ã— V_æˆ‘</div>
                            <div>[0.4, 0.1, -0.1]</div>
                        </div>
                        <div>+</div>
                        <div style="text-align: center;">
                            <div style="color: #3498db; font-weight: bold;">0.27 Ã— V_çˆ±</div>
                            <div>[0.1, 0.2, 0.1]</div>
                        </div>
                        <div>+</div>
                        <div style="text-align: center;">
                            <div style="color: #27ae60; font-weight: bold;">0.22 Ã— V_æœºå™¨</div>
                            <div>[0.1, 0.2, 0.1]</div>
                        </div>
                        <div>+</div>
                        <div style="text-align: center;">
                            <div style="color: #f39c12; font-weight: bold;">0.25 Ã— V_å­¦ä¹ </div>
                            <div>[0.2, -0.1, 0.3]</div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin: 20px 0;">
                        <div style="font-size: 20px;">â¬‡ï¸</div>
                        <div style="font-weight: bold; background: #8e44ad; color: white; padding: 10px; border-radius: 5px; display: inline-block;">
                            æœ€ç»ˆè¾“å‡º: [0.8, 0.4, 0.4]
                        </div>
                    </div>
                    
                    <div style="background: #fff3cd; padding: 10px; border-radius: 5px; border-left: 4px solid #ffc107;">
                        <strong>é‡è¦:</strong> è¿™ä¸ªè¾“å‡ºèåˆäº†åºåˆ—ä¸­æ‰€æœ‰ä½ç½®çš„ä¿¡æ¯ï¼Œæƒé‡å†³å®šäº†æ¯ä¸ªä½ç½®çš„è´¡çŒ®ç¨‹åº¦ã€‚
                    </div>
                </div>
                <p><strong>ç»“æœ:</strong> å¾—åˆ°èåˆäº†å…¨å±€ä¿¡æ¯çš„æ–°è¡¨ç¤ºï¼Œè¿™å°±æ˜¯è‡ªæ³¨æ„åŠ›çš„è¾“å‡ºï¼</p>
            `;
        }

        // æ­¥éª¤4: å¤šå¤´æ³¨æ„åŠ›æ¼”ç¤ºå‡½æ•°
        function showMultiHead() {
            const multiheadDemo = document.getElementById('multihead-demo');
            multiheadDemo.innerHTML = `
                <h4>ğŸ‘¥ å¤šå¤´æ³¨æ„åŠ›ç»“æ„</h4>
                <div style="background: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <strong>8ä¸ªå¹¶è¡Œçš„æ³¨æ„åŠ›å¤´</strong>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;">
                        ${Array(8).fill(0).map((_, i) => `
                            <div style="border: 2px solid #3498db; padding: 10px; text-align: center; border-radius: 8px;">
                                <div style="font-weight: bold; color: #3498db;">å¤´ ${i+1}</div>
                                <div style="font-size: 12px; margin: 5px 0;">ç»´åº¦: 64</div>
                                <div style="background: #3498db; color: white; padding: 5px; border-radius: 4px; font-size: 11px;">
                                    Q${i+1} Ã— K${i+1}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    <div style="text-align: center; margin-top: 20px;">
                        <div style="font-size: 18px;">â¬‡ï¸ æ‹¼æ¥ â¬‡ï¸</div>
                        <div style="background: #27ae60; color: white; padding: 10px; border-radius: 8px; display: inline-block; margin-top: 10px;">
                            è¾“å‡ºç»´åº¦: 8 Ã— 64 = 512
                        </div>
                    </div>
                </div>
                <p><strong>è¯´æ˜:</strong> æ¯ä¸ªå¤´å…³æ³¨ä¸åŒçš„ç‰¹å¾å­ç©ºé—´ï¼Œæ€»ç»´åº¦ä¿æŒ512ä¸å˜ã€‚</p>
            `;
        }

        function showHeadComparison() {
            const multiheadDemo = document.getElementById('multihead-demo');
            multiheadDemo.innerHTML = `
                <h4>ğŸ” ä¸åŒæ³¨æ„åŠ›å¤´çš„å…³æ³¨ç‚¹</h4>
                <div style="background: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <strong>å¥å­: "The cat sat on the mat"</strong>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                        <div style="border: 2px solid #e74c3c; padding: 15px; border-radius: 8px;">
                            <div style="font-weight: bold; color: #e74c3c; margin-bottom: 10px;">æ³¨æ„åŠ›å¤´ 1 - è¯­æ³•å…³ç³»</div>
                            <div style="font-size: 14px;">
                                <span style="background: #e74c3c; color: white; padding: 2px 5px; border-radius: 3px;">The</span>
                                <span style="background: #ffebee; padding: 2px 5px; border-radius: 3px;">cat</span>
                                <span>sat on</span>
                                <span style="background: #e74c3c; color: white; padding: 2px 5px; border-radius: 3px;">the</span>
                                <span style="background: #ffebee; padding: 2px 5px; border-radius: 3px;">mat</span>
                            </div>
                            <div style="font-size: 12px; margin-top: 5px;">å…³æ³¨: å† è¯ä¸åè¯</div>
                        </div>
                        
                        <div style="border: 2px solid #3498db; padding: 15px; border-radius: 8px;">
                            <div style="font-weight: bold; color: #3498db; margin-bottom: 10px;">æ³¨æ„åŠ›å¤´ 2 - åŠ¨ä½œå…³ç³»</div>
                            <div style="font-size: 14px;">
                                <span>The</span>
                                <span style="background: #3498db; color: white; padding: 2px 5px; border-radius: 3px;">cat</span>
                                <span style="background: #e3f2fd; padding: 2px 5px; border-radius: 3px;">sat</span>
                                <span>on the</span>
                                <span style="background: #3498db; color: white; padding: 2px 5px; border-radius: 3px;">mat</span>
                            </div>
                            <div style="font-size: 12px; margin-top: 5px;">å…³æ³¨: ä¸»è¯­ä¸è°“è¯­</div>
                        </div>
                        
                        <div style="border: 2px solid #27ae60; padding: 15px; border-radius: 8px;">
                            <div style="font-weight: bold; color: #27ae60; margin-bottom: 10px;">æ³¨æ„åŠ›å¤´ 3 - ä½ç½®å…³ç³»</div>
                            <div style="font-size: 14px;">
                                <span>The cat</span>
                                <span style="background: #27ae60; color: white; padding: 2px 5px; border-radius: 3px;">sat</span>
                                <span style="background: #e8f5e8; padding: 2px 5px; border-radius: 3px;">on</span>
                                <span>the</span>
                                <span style="background: #27ae60; color: white; padding: 2px 5px; border-radius: 3px;">mat</span>
                            </div>
                            <div style="font-size: 12px; margin-top: 5px;">å…³æ³¨: ä»‹è¯å…³ç³»</div>
                        </div>
                        
                        <div style="border: 2px solid #f39c12; padding: 15px; border-radius: 8px;">
                            <div style="font-weight: bold; color: #f39c12; margin-bottom: 10px;">æ³¨æ„åŠ›å¤´ 4 - è¯­ä¹‰å…³ç³»</div>
                            <div style="font-size: 14px;">
                                <span>The</span>
                                <span style="background: #f39c12; color: white; padding: 2px 5px; border-radius: 3px;">cat</span>
                                <span>sat on the</span>
                                <span style="background: #fef9e7; padding: 2px 5px; border-radius: 3px;">mat</span>
                            </div>
                            <div style="font-size: 12px; margin-top: 5px;">å…³æ³¨: å®ä½“å…³ç³»</div>
                        </div>
                    </div>
                </div>
                <p><strong>è¯´æ˜:</strong> ä¸åŒçš„å¤´å­¦ä¼šå…³æ³¨ä¸åŒç±»å‹çš„è¯­è¨€æ¨¡å¼å’Œå…³ç³»ã€‚</p>
            `;
        }

        function showConcatenation() {
            const multiheadDemo = document.getElementById('multihead-demo');
            multiheadDemo.innerHTML = `
                <h4>ğŸ”— æ‹¼æ¥ä¸çº¿æ€§å˜æ¢</h4>
                <div style="background: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
                    <div style="text-align: center;">
                        <div style="display: flex; justify-content: space-around; align-items: center; margin: 20px 0;">
                            <div style="text-align: center;">
                                <div style="font-weight: bold;">å¤´1è¾“å‡º</div>
                                <div style="background: #e74c3c; color: white; padding: 8px; border-radius: 5px; margin: 5px;">64ç»´</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-weight: bold;">å¤´2è¾“å‡º</div>
                                <div style="background: #3498db; color: white; padding: 8px; border-radius: 5px; margin: 5px;">64ç»´</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-weight: bold;">...</div>
                                <div style="background: #95a5a6; color: white; padding: 8px; border-radius: 5px; margin: 5px;">...</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-weight: bold;">å¤´8è¾“å‡º</div>
                                <div style="background: #f39c12; color: white; padding: 8px; border-radius: 5px; margin: 5px;">64ç»´</div>
                            </div>
                        </div>
                        
                        <div style="font-size: 24px; margin: 20px 0;">â¬‡ï¸ æ‹¼æ¥ (Concatenate) â¬‡ï¸</div>
                        
                        <div style="background: #8e44ad; color: white; padding: 15px; border-radius: 8px; margin: 20px 0;">
                            æ‹¼æ¥ç»“æœ: 8 Ã— 64 = 512ç»´
                        </div>
                        
                        <div style="font-size: 24px; margin: 20px 0;">â¬‡ï¸ çº¿æ€§å˜æ¢ W^O â¬‡ï¸</div>
                        
                        <div style="background: #27ae60; color: white; padding: 15px; border-radius: 8px;">
                            æœ€ç»ˆè¾“å‡º: 512ç»´
                        </div>
                    </div>
                    
                    <div style="background: #fff3cd; padding: 10px; border-radius: 5px; border-left: 4px solid #ffc107; margin-top: 20px;">
                        <strong>å…¬å¼:</strong> MultiHead(Q,K,V) = Concat(headâ‚, headâ‚‚, ..., headâ‚ˆ)W^O
                    </div>
                </div>
                <p><strong>è¯´æ˜:</strong> æ‹¼æ¥æ‰€æœ‰å¤´çš„è¾“å‡ºï¼Œç„¶åé€šè¿‡çº¿æ€§å˜æ¢æ•´åˆä¿¡æ¯ã€‚</p>
            `;
        }

        // æ­¥éª¤5: å‰é¦ˆç½‘ç»œæ¼”ç¤ºå‡½æ•°
        function showFFNStructure() {
            const ffnDemo = document.getElementById('ffn-demo');
            ffnDemo.innerHTML = `
                <h4>ğŸ—ï¸ å‰é¦ˆç½‘ç»œç»“æ„</h4>
                <div style="background: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
                    <div style="text-align: center;">
                        <div style="display: flex; justify-content: center; align-items: center; gap: 30px; margin: 20px 0;">
                            <div style="text-align: center;">
                                <div style="background: #3498db; color: white; padding: 15px; border-radius: 8px;">
                                    è¾“å…¥<br>512ç»´
                                </div>
                            </div>
                            
                            <div style="font-size: 24px;">â†’</div>
                            
                            <div style="text-align: center;">
                                <div style="background: #e74c3c; color: white; padding: 15px; border-radius: 8px;">
                                    ç¬¬ä¸€å±‚<br>2048ç»´<br><small>(æ‰©å±•4å€)</small>
                                </div>
                                <div style="margin-top: 5px; font-size: 12px;">Wâ‚x + bâ‚</div>
                            </div>
                            
                            <div style="font-size: 24px;">â†’</div>
                            
                            <div style="text-align: center;">
                                <div style="background: #f39c12; color: white; padding: 15px; border-radius: 8px;">
                                    ReLU<br>æ¿€æ´»
                                </div>
                                <div style="margin-top: 5px; font-size: 12px;">max(0, x)</div>
                            </div>
                            
                            <div style="font-size: 24px;">â†’</div>
                            
                            <div style="text-align: center;">
                                <div style="background: #27ae60; color: white; padding: 15px; border-radius: 8px;">
                                    ç¬¬äºŒå±‚<br>512ç»´<br><small>(å‹ç¼©å›åŸç»´åº¦)</small>
                                </div>
                                <div style="margin-top: 5px; font-size: 12px;">Wâ‚‚x + bâ‚‚</div>
                            </div>
                        </div>
                        
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 20px;">
                            <strong>å®Œæ•´å…¬å¼:</strong> FFN(x) = max(0, xWâ‚ + bâ‚)Wâ‚‚ + bâ‚‚
                        </div>
                    </div>
                </div>
                <p><strong>è¯´æ˜:</strong> æ¯ä¸ªä½ç½®ç‹¬ç«‹åº”ç”¨ç›¸åŒçš„å‰é¦ˆç½‘ç»œï¼Œå¢åŠ æ¨¡å‹çš„éçº¿æ€§è¡¨è¾¾èƒ½åŠ›ã€‚</p>
            `;
        }

        function showReLUActivation() {
            const ffnDemo = document.getElementById('ffn-demo');
            ffnDemo.innerHTML = `
                <h4>âš¡ ReLUæ¿€æ´»å‡½æ•°</h4>
                <div style="background: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
                    <div style="display: flex; justify-content: space-around; align-items: center;">
                        <div style="text-align: center;">
                            <div style="font-weight: bold;">è¾“å…¥ç¤ºä¾‹</div>
                            <div style="margin: 10px 0; font-family: monospace;">
                                [-0.5, 2.1, -1.2, 0.8, -0.1, 1.5]
                            </div>
                        </div>
                        
                        <div style="font-size: 24px;">ReLU(x) = max(0, x)</div>
                        
                        <div style="text-align: center;">
                            <div style="font-weight: bold;">è¾“å‡ºç»“æœ</div>
                            <div style="margin: 10px 0; font-family: monospace;">
                                [0.0, 2.1, 0.0, 0.8, 0.0, 1.5]
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <div style="text-align: center; font-weight: bold; margin-bottom: 10px;">ReLUå‡½æ•°å›¾ç¤º</div>
                        <div style="display: flex; justify-content: center;">
                            <svg width="300" height="150" style="border: 1px solid #ddd;">
                                <line x1="50" y1="100" x2="250" y2="100" stroke="#333" stroke-width="2"/>
                                <line x1="150" y1="20" x2="150" y2="130" stroke="#333" stroke-width="2"/>
                                <path d="M 50 100 L 150 100 L 250 20" stroke="#e74c3c" stroke-width="3" fill="none"/>
                                <text x="250" y="115" font-size="12">x</text>
                                <text x="155" y="15" font-size="12">y</text>
                                <text x="120" y="115" font-size="10">0</text>
                                <text x="260" y="50" font-size="12" fill="#e74c3c">y = max(0, x)</text>
                            </svg>
                        </div>
                    </div>
                    
                    <div style="background: #e8f5e8; padding: 10px; border-radius: 5px; border-left: 4px solid #27ae60;">
                        <strong>ä½œç”¨:</strong> å¼•å…¥éçº¿æ€§ï¼Œåªä¿ç•™æ­£å€¼ï¼Œè¿‡æ»¤è´Ÿå€¼ï¼Œå¢å¼ºæ¨¡å‹è¡¨è¾¾èƒ½åŠ›
                    </div>
                </div>
                <p><strong>è¯´æ˜:</strong> ReLUç®€å•é«˜æ•ˆï¼Œé¿å…æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ï¼Œæ˜¯æ·±åº¦å­¦ä¹ ä¸­å¸¸ç”¨çš„æ¿€æ´»å‡½æ•°ã€‚</p>
            `;
        }

        function showResidualConnection() {
            const ffnDemo = document.getElementById('ffn-demo');
            ffnDemo.innerHTML = `
                <h4>ğŸ”„ æ®‹å·®è¿æ¥</h4>
                <div style="background: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <strong>æ®‹å·®è¿æ¥è®©ä¿¡æ¯å¯ä»¥"è·³è¿‡"æŸäº›å±‚ç›´æ¥ä¼ é€’</strong>
                    </div>
                    
                    <div style="position: relative; height: 200px; margin: 20px 0;">
                        <div style="position: absolute; left: 50px; top: 50px; background: #3498db; color: white; padding: 10px; border-radius: 8px;">
                            è¾“å…¥ X
                        </div>
                        
                        <div style="position: absolute; left: 200px; top: 50px; background: #e74c3c; color: white; padding: 10px; border-radius: 8px;">
                            å‰é¦ˆç½‘ç»œ<br>FFN(X)
                        </div>
                        
                        <div style="position: absolute; left: 350px; top: 50px; background: #27ae60; color: white; padding: 10px; border-radius: 8px;">
                            è¾“å‡º<br>X + FFN(X)
                        </div>
                        
                        <!-- ä¸»è·¯å¾„ç®­å¤´ -->
                        <div style="position: absolute; left: 150px; top: 65px; width: 40px; height: 0; border-top: 3px solid #333;"></div>
                        <div style="position: absolute; left: 190px; top: 60px; width: 0; height: 0; border-left: 10px solid #333; border-top: 5px solid transparent; border-bottom: 5px solid transparent;"></div>
                        
                        <div style="position: absolute; left: 300px; top: 65px; width: 40px; height: 0; border-top: 3px solid #333;"></div>
                        <div style="position: absolute; left: 340px; top: 60px; width: 0; height: 0; border-left: 10px solid #333; border-top: 5px solid transparent; border-bottom: 5px solid transparent;"></div>
                        
                        <!-- è·³è·ƒè¿æ¥ç®­å¤´ -->
                        <div style="position: absolute; left: 100px; top: 120px; width: 200px; height: 0; border-top: 3px solid #f39c12; border-style: dashed;"></div>
                        <div style="position: absolute; left: 300px; top: 115px; width: 0; height: 0; border-left: 10px solid #f39c12; border-top: 5px solid transparent; border-bottom: 5px solid transparent;"></div>
                        
                        <div style="position: absolute; left: 150px; top: 140px; color: #f39c12; font-weight: bold; font-size: 14px;">
                            æ®‹å·®è¿æ¥ (è·³è·ƒè¿æ¥)
                        </div>
                        
                        <!-- åŠ å· -->
                        <div style="position: absolute; left: 315px; top: 85px; font-size: 24px; font-weight: bold;">+</div>
                    </div>
                    
                    <div style="background: #fff3cd; padding: 10px; border-radius: 5px; border-left: 4px solid #ffc107; margin-top: 20px;">
                        <strong>ä¼˜åŠ¿:</strong><br>
                        â€¢ ç¼“è§£æ¢¯åº¦æ¶ˆå¤±é—®é¢˜<br>
                        â€¢ è®©ç½‘ç»œæ›´å®¹æ˜“è®­ç»ƒ<br>
                        â€¢ ä¿ç•™åŸå§‹ä¿¡æ¯ï¼Œé˜²æ­¢ä¿¡æ¯ä¸¢å¤±
                    </div>
                </div>
                <p><strong>è¯´æ˜:</strong> æ®‹å·®è¿æ¥æ˜¯æ·±åº¦å­¦ä¹ çš„é‡è¦æŠ€æœ¯ï¼Œä½¿å¾—è®­ç»ƒéå¸¸æ·±çš„ç½‘ç»œæˆä¸ºå¯èƒ½ã€‚</p>
            `;
        }

        function showLayerNorm() {
            const ffnDemo = document.getElementById('ffn-demo');
            ffnDemo.innerHTML = `
                <h4>ğŸ“Š å±‚å½’ä¸€åŒ– (Layer Normalization)</h4>
                <div style="background: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <strong>æ ‡å‡†åŒ–æ¯ä¸€å±‚çš„è¾“å…¥ï¼Œç¨³å®šè®­ç»ƒè¿‡ç¨‹</strong>
                    </div>
                    
                    <div style="display: flex; justify-content: space-around; align-items: center; margin: 20px 0;">
                        <div style="text-align: center;">
                            <div style="font-weight: bold;">å½’ä¸€åŒ–å‰</div>
                            <div style="margin: 10px 0; font-family: monospace; font-size: 14px;">
                                [1.2, -0.5, 2.1, 0.8, -1.1]<br>
                                å‡å€¼: 0.5<br>
                                æ ‡å‡†å·®: 1.2
                            </div>
                            <div style="font-size: 12px; color: #666;">åˆ†å¸ƒä¸ç¨³å®š</div>
                        </div>
                        
                        <div style="font-size: 24px;">â†’ LayerNorm â†’</div>
                        
                        <div style="text-align: center;">
                            <div style="font-weight: bold;">å½’ä¸€åŒ–å</div>
                            <div style="margin: 10px 0; font-family: monospace; font-size: 14px;">
                                [0.6, -0.8, 1.3, 0.2, -1.3]<br>
                                å‡å€¼: 0.0<br>
                                æ ‡å‡†å·®: 1.0
                            </div>
                            <div style="font-size: 12px; color: #27ae60;">åˆ†å¸ƒç¨³å®š</div>
                        </div>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 20px 0;">
                        <div style="font-weight: bold; text-align: center; margin-bottom: 10px;">å±‚å½’ä¸€åŒ–å…¬å¼</div>
                        <div style="text-align: center; font-family: monospace;">
                            LayerNorm(x) = Î³ Ã— (x - Î¼) / Ïƒ + Î²<br><br>
                            å…¶ä¸­ï¼š<br>
                            Î¼ = å±‚å†…å‡å€¼<br>
                            Ïƒ = å±‚å†…æ ‡å‡†å·®<br>
                            Î³, Î² = å¯å­¦ä¹ å‚æ•°
                        </div>
                    </div>
                    
                    <div style="background: #e8f5e8; padding: 10px; border-radius: 5px; border-left: 4px solid #27ae60;">
                        <strong>å®Œæ•´ç»“æ„:</strong> LayerNorm(x + Sublayer(x))<br>
                        å…ˆåº”ç”¨æ®‹å·®è¿æ¥ï¼Œå†è¿›è¡Œå±‚å½’ä¸€åŒ–
                    </div>
                </div>
                <p><strong>è¯´æ˜:</strong> å±‚å½’ä¸€åŒ–ç¡®ä¿æ¯å±‚çš„è¾“å…¥åˆ†å¸ƒç¨³å®šï¼ŒåŠ é€Ÿè®­ç»ƒæ”¶æ•›ã€‚</p>
            `;
        }

        // æ­¥éª¤6: è§£ç å™¨æ¼”ç¤ºå‡½æ•°
        function showMaskedAttention() {
            const decoderDemo = document.getElementById('decoder-demo');
            decoderDemo.innerHTML = `
                <h4>ğŸ­ æ©ç è‡ªæ³¨æ„åŠ›</h4>
                <div style="background: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <strong>é˜²æ­¢æ¨¡å‹çœ‹åˆ°æœªæ¥ä¿¡æ¯</strong>
                    </div>
                    
                    <div style="display: flex; justify-content: space-around; margin: 20px 0;">
                        <div style="text-align: center;">
                            <div style="font-weight: bold; margin-bottom: 10px;">æœªæ©ç çš„æ³¨æ„åŠ›çŸ©é˜µ</div>
                            <table style="border-collapse: collapse; margin: 10px 0;">
                                <tr><td></td><td style="background: #f8f9fa; padding: 8px; border: 1px solid #ddd;">æˆ‘</td><td style="background: #f8f9fa; padding: 8px; border: 1px solid #ddd;">çˆ±</td><td style="background: #f8f9fa; padding: 8px; border: 1px solid #ddd;">å­¦ä¹ </td></tr>
                                <tr><td style="background: #f8f9fa; padding: 8px; border: 1px solid #ddd;">æˆ‘</td><td style="padding: 8px; border: 1px solid #ddd; background: #3498db; color: white;">0.8</td><td style="padding: 8px; border: 1px solid #ddd; background: #e74c3c; color: white;">0.3</td><td style="padding: 8px; border: 1px solid #ddd; background: #e74c3c; color: white;">0.2</td></tr>
                                <tr><td style="background: #f8f9fa; padding: 8px; border: 1px solid #ddd;">çˆ±</td><td style="padding: 8px; border: 1px solid #ddd;">0.2</td><td style="padding: 8px; border: 1px solid #ddd; background: #3498db; color: white;">0.9</td><td style="padding: 8px; border: 1px solid #ddd; background: #e74c3c; color: white;">0.7</td></tr>
                                <tr><td style="background: #f8f9fa; padding: 8px; border: 1px solid #ddd;">å­¦ä¹ </td><td style="padding: 8px; border: 1px solid #ddd;">0.3</td><td style="padding: 8px; border: 1px solid #ddd;">0.5</td><td style="padding: 8px; border: 1px solid #ddd; background: #3498db; color: white;">0.7</td></tr>
                            </table>
                            <div style="font-size: 12px; color: #e74c3c;">âŒ å¯ä»¥çœ‹åˆ°æœªæ¥ä¿¡æ¯</div>
                        </div>
                        
                        <div style="text-align: center;">
                            <div style="font-weight: bold; margin-bottom: 10px;">æ©ç åçš„æ³¨æ„åŠ›çŸ©é˜µ</div>
                            <table style="border-collapse: collapse; margin: 10px 0;">
                                <tr><td></td><td style="background: #f8f9fa; padding: 8px; border: 1px solid #ddd;">æˆ‘</td><td style="background: #f8f9fa; padding: 8px; border: 1px solid #ddd;">çˆ±</td><td style="background: #f8f9fa; padding: 8px; border: 1px solid #ddd;">å­¦ä¹ </td></tr>
                                <tr><td style="background: #f8f9fa; padding: 8px; border: 1px solid #ddd;">æˆ‘</td><td style="padding: 8px; border: 1px solid #ddd; background: #3498db; color: white;">0.8</td><td style="padding: 8px; border: 1px solid #ddd; background: #95a5a6; color: white;">-âˆ</td><td style="padding: 8px; border: 1px solid #ddd; background: #95a5a6; color: white;">-âˆ</td></tr>
                                <tr><td style="background: #f8f9fa; padding: 8px; border: 1px solid #ddd;">çˆ±</td><td style="padding: 8px; border: 1px solid #ddd;">0.2</td><td style="padding: 8px; border: 1px solid #ddd; background: #3498db; color: white;">0.9</td><td style="padding: 8px; border: 1px solid #ddd; background: #95a5a6; color: white;">-âˆ</td></tr>
                                <tr><td style="background: #f8f9fa; padding: 8px; border: 1px solid #ddd;">å­¦ä¹ </td><td style="padding: 8px; border: 1px solid #ddd;">0.3</td><td style="padding: 8px; border: 1px solid #ddd;">0.5</td><td style="padding: 8px; border: 1px solid #ddd; background: #3498db; color: white;">0.7</td></tr>
                            </table>
                            <div style="font-size: 12px; color: #27ae60;">âœ… æ— æ³•çœ‹åˆ°æœªæ¥ä¿¡æ¯</div>
                        </div>
                    </div>
                    
                    <div style="background: #fff3cd; padding: 10px; border-radius: 5px; border-left: 4px solid #ffc107;">
                        <strong>æ©ç åŸç†:</strong> å°†æœªæ¥ä½ç½®çš„æ³¨æ„åŠ›åˆ†æ•°è®¾ä¸º-âˆï¼Œç»è¿‡softmaxåå˜ä¸º0
                    </div>
                </div>
                <p><strong>è¯´æ˜:</strong> æ©ç ç¡®ä¿è‡ªå›å½’ç”Ÿæˆæ—¶ï¼Œæ¨¡å‹åªèƒ½åŸºäºå·²ç”Ÿæˆçš„å†…å®¹é¢„æµ‹ä¸‹ä¸€ä¸ªè¯ã€‚</p>
            `;
        }

        function showCrossAttention() {
            const decoderDemo = document.getElementById('decoder-demo');
            decoderDemo.innerHTML = `
                <h4>ğŸ”„ ç¼–ç å™¨-è§£ç å™¨äº¤å‰æ³¨æ„åŠ›</h4>
                <div style="background: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <strong>è§£ç å™¨å…³æ³¨ç¼–ç å™¨çš„è¾“å‡º</strong>
                    </div>
                    
                    <div style="display: flex; justify-content: space-around; align-items: center; margin: 20px 0;">
                        <div style="text-align: center; border: 2px solid #3498db; padding: 15px; border-radius: 8px;">
                            <div style="font-weight: bold; color: #3498db;">ç¼–ç å™¨è¾“å‡º</div>
                            <div style="margin: 10px 0; font-size: 14px;">
                                "I love machine learning"<br>
                                [h_1, h_2, h_3, h_4]
                            </div>
                            <div style="font-size: 12px; color: #666;">æä¾› Key å’Œ Value</div>
                        </div>
                        
                        <div style="text-align: center;">
                            <div style="font-size: 24px;">â†”ï¸</div>
                            <div style="font-size: 14px; margin-top: 5px;">äº¤å‰æ³¨æ„åŠ›</div>
                        </div>
                        
                        <div style="text-align: center; border: 2px solid #e74c3c; padding: 15px; border-radius: 8px;">
                            <div style="font-weight: bold; color: #e74c3c;">è§£ç å™¨çŠ¶æ€</div>
                            <div style="margin: 10px 0; font-size: 14px;">
                                "æˆ‘çˆ±"<br>
                                [d_1, d_2]
                            </div>
                            <div style="font-size: 12px; color: #666;">æä¾› Query</div>
                        </div>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 20px 0;">
                        <div style="text-align: center; font-weight: bold; margin-bottom: 10px;">äº¤å‰æ³¨æ„åŠ›è®¡ç®—</div>
                        <div style="font-family: monospace; text-align: center;">
                            Q = è§£ç å™¨çŠ¶æ€ Ã— W_Q<br>
                            K = ç¼–ç å™¨è¾“å‡º Ã— W_K<br>
                            V = ç¼–ç å™¨è¾“å‡º Ã— W_V<br><br>
                            Attention(Q, K, V) = softmax(QK^T)V
                        </div>
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <div style="font-weight: bold; text-align: center; margin-bottom: 10px;">æ³¨æ„åŠ›æƒé‡ç¤ºä¾‹</div>
                        <div style="display: flex; justify-content: center;">
                            <table style="border-collapse: collapse;">
                                <tr>
                                    <td style="border: 1px solid #ddd; padding: 8px; background: #f8f9fa;"></td>
                                    <td style="border: 1px solid #ddd; padding: 8px; background: #f8f9fa;">I</td>
                                    <td style="border: 1px solid #ddd; padding: 8px; background: #f8f9fa;">love</td>
                                    <td style="border: 1px solid #ddd; padding: 8px; background: #f8f9fa;">machine</td>
                                    <td style="border: 1px solid #ddd; padding: 8px; background: #f8f9fa;">learning</td>
                                </tr>
                                <tr>
                                    <td style="border: 1px solid #ddd; padding: 8px; background: #f8f9fa;">æˆ‘</td>
                                    <td style="border: 1px solid #ddd; padding: 8px; background: #e74c3c; color: white;">0.9</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">0.1</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">0.0</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">0.0</td>
                                </tr>
                                <tr>
                                    <td style="border: 1px solid #ddd; padding: 8px; background: #f8f9fa;">çˆ±</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">0.1</td>
                                    <td style="border: 1px solid #ddd; padding: 8px; background: #e74c3c; color: white;">0.8</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">0.1</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">0.0</td>
                                </tr>
                            </table>
                        </div>
                        <div style="text-align: center; font-size: 12px; margin-top: 10px;">
                            "æˆ‘"ä¸»è¦å…³æ³¨"I"ï¼Œ"çˆ±"ä¸»è¦å…³æ³¨"love"
                        </div>
                    </div>
                </div>
                <p><strong>è¯´æ˜:</strong> äº¤å‰æ³¨æ„åŠ›å®ç°äº†æºè¯­è¨€å’Œç›®æ ‡è¯­è¨€ä¹‹é—´çš„å¯¹é½ï¼Œæ˜¯æœºå™¨ç¿»è¯‘çš„å…³é”®ã€‚</p>
            `;
        }

        function showAutoregressive() {
            const decoderDemo = document.getElementById('decoder-demo');
            decoderDemo.innerHTML = `
                <h4>ğŸ”„ è‡ªå›å½’ç”Ÿæˆè¿‡ç¨‹</h4>
                <div style="background: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <strong>é€æ­¥ç”Ÿæˆç›®æ ‡åºåˆ—</strong>
                    </div>
                    
                    <div id="autoregressive-steps" style="margin: 20px 0;">
                        <div class="generation-step" style="margin: 15px 0; padding: 15px; border: 2px solid #3498db; border-radius: 8px;">
                            <div style="font-weight: bold; color: #3498db;">æ­¥éª¤ 1</div>
                            <div style="margin: 10px 0;">
                                è¾“å…¥: [START] â†’ é¢„æµ‹: "æˆ‘" (æ¦‚ç‡: 0.85)
                            </div>
                            <div style="background: #e3f2fd; padding: 8px; border-radius: 4px;">
                                å½“å‰åºåˆ—: [START, æˆ‘]
                            </div>
                        </div>
                        
                        <div class="generation-step" style="margin: 15px 0; padding: 15px; border: 2px solid #27ae60; border-radius: 8px;">
                            <div style="font-weight: bold; color: #27ae60;">æ­¥éª¤ 2</div>
                            <div style="margin: 10px 0;">
                                è¾“å…¥: [START, æˆ‘] â†’ é¢„æµ‹: "çˆ±" (æ¦‚ç‡: 0.78)
                            </div>
                            <div style="background: #e8f5e8; padding: 8px; border-radius: 4px;">
                                å½“å‰åºåˆ—: [START, æˆ‘, çˆ±]
                            </div>
                        </div>
                        
                        <div class="generation-step" style="margin: 15px 0; padding: 15px; border: 2px solid #f39c12; border-radius: 8px;">
                            <div style="font-weight: bold; color: #f39c12;">æ­¥éª¤ 3</div>
                            <div style="margin: 10px 0;">
                                è¾“å…¥: [START, æˆ‘, çˆ±] â†’ é¢„æµ‹: "æœºå™¨" (æ¦‚ç‡: 0.92)
                            </div>
                            <div style="background: #fef9e7; padding: 8px; border-radius: 4px;">
                                å½“å‰åºåˆ—: [START, æˆ‘, çˆ±, æœºå™¨]
                            </div>
                        </div>
                        
                        <div class="generation-step" style="margin: 15px 0; padding: 15px; border: 2px solid #e74c3c; border-radius: 8px;">
                            <div style="font-weight: bold; color: #e74c3c;">æ­¥éª¤ 4</div>
                            <div style="margin: 10px 0;">
                                è¾“å…¥: [START, æˆ‘, çˆ±, æœºå™¨] â†’ é¢„æµ‹: "å­¦ä¹ " (æ¦‚ç‡: 0.89)
                            </div>
                            <div style="background: #ffebee; padding: 8px; border-radius: 4px;">
                                å½“å‰åºåˆ—: [START, æˆ‘, çˆ±, æœºå™¨, å­¦ä¹ ]
                            </div>
                        </div>
                        
                        <div class="generation-step" style="margin: 15px 0; padding: 15px; border: 2px solid #8e44ad; border-radius: 8px;">
                            <div style="font-weight: bold; color: #8e44ad;">æ­¥éª¤ 5</div>
                            <div style="margin: 10px 0;">
                                è¾“å…¥: [START, æˆ‘, çˆ±, æœºå™¨, å­¦ä¹ ] â†’ é¢„æµ‹: [END] (æ¦‚ç‡: 0.95)
                            </div>
                            <div style="background: #f3e5f5; padding: 8px; border-radius: 4px;">
                                <strong>ç”Ÿæˆå®Œæˆ!</strong> æœ€ç»ˆç»“æœ: "æˆ‘çˆ±æœºå™¨å­¦ä¹ "
                            </div>
                        </div>
                    </div>
                    
                    <div style="background: #fff3cd; padding: 10px; border-radius: 5px; border-left: 4px solid #ffc107;">
                        <strong>å…³é”®ç‰¹ç‚¹:</strong><br>
                        â€¢ æ¯æ¬¡åªç”Ÿæˆä¸€ä¸ªè¯<br>
                        â€¢ åŸºäºä¹‹å‰ç”Ÿæˆçš„æ‰€æœ‰è¯é¢„æµ‹ä¸‹ä¸€ä¸ªè¯<br>
                        â€¢ æ©ç ç¡®ä¿ä¸ä¼šçœ‹åˆ°æœªæ¥ä¿¡æ¯
                    </div>
                </div>
                <p><strong>è¯´æ˜:</strong> è‡ªå›å½’ç”Ÿæˆä½¿æ¨¡å‹èƒ½å¤Ÿç”Ÿæˆä»»æ„é•¿åº¦çš„åºåˆ—ï¼Œé€‚ç”¨äºæ–‡æœ¬ç”Ÿæˆä»»åŠ¡ã€‚</p>
            `;
        }

        function showOutputProjection() {
            const decoderDemo = document.getElementById('decoder-demo');
            decoderDemo.innerHTML = `
                <h4>ğŸ“Š è¾“å‡ºæŠ•å½±ä¸æ¦‚ç‡è®¡ç®—</h4>
                <div style="background: white; padding: 15px; border-radius: 5px; margin: 10px 0;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <strong>å°†éšè—çŠ¶æ€è½¬æ¢ä¸ºè¯æ±‡æ¦‚ç‡</strong>
                    </div>
                    
                    <div style="display: flex; justify-content: center; align-items: center; gap: 30px; margin: 20px 0;">
                        <div style="text-align: center;">
                            <div style="background: #3498db; color: white; padding: 15px; border-radius: 8px;">
                                è§£ç å™¨è¾“å‡º<br>512ç»´éšè—çŠ¶æ€<br>[hâ‚, hâ‚‚, ..., hâ‚…â‚â‚‚]
                            </div>
                        </div>
                        
                        <div style="font-size: 24px;">â†’</div>
                        
                        <div style="text-align: center;">
                            <div style="background: #e74c3c; color: white; padding: 15px; border-radius: 8px;">
                                çº¿æ€§æŠ•å½±<br>W_output Ã— h + b<br>è¯æ±‡è¡¨å¤§å°ç»´åº¦
                            </div>
                        </div>
                        
                        <div style="font-size: 24px;">â†’</div>
                        
                        <div style="text-align: center;">
                            <div style="background: #27ae60; color: white; padding: 15px; border-radius: 8px;">
                                Softmax<br>æ¦‚ç‡åˆ†å¸ƒ<br>Î£ = 1.0
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <div style="font-weight: bold; text-align: center; margin-bottom: 15px;">è¯æ±‡æ¦‚ç‡ç¤ºä¾‹ (é¢„æµ‹"æœºå™¨")</div>
                        <div style="display: flex; justify-content: center;">
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; font-family: monospace;">
                                æˆ‘:     0.01 (1%)<br>
                                çˆ±:     0.02 (2%)<br>
                                <strong style="color: #e74c3c;">æœºå™¨:   0.89 (89%)</strong><br>
                                å­¦ä¹ :   0.03 (3%)<br>
                                æ˜¯:     0.02 (2%)<br>
                                çš„:     0.01 (1%)<br>
                                ...     0.02 (2%)<br>
                                â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br>
                                æ€»è®¡:   1.00 (100%)
                            </div>
                        </div>
                    </div>
                    
                    <div style="display: flex; justify-content: space-around; margin: 20px 0;">
                        <div style="text-align: center; border: 2px solid #3498db; padding: 15px; border-radius: 8px;">
                            <div style="font-weight: bold; color: #3498db;">è®­ç»ƒæ—¶</div>
                            <div style="font-size: 14px; margin: 10px 0;">
                                ä½¿ç”¨äº¤å‰ç†µæŸå¤±<br>
                                ä¸çœŸå®æ ‡ç­¾æ¯”è¾ƒ
                            </div>
                            <div style="background: #e3f2fd; padding: 8px; border-radius: 4px; font-size: 12px;">
                                Loss = -log(P(æ­£ç¡®è¯))
                            </div>
                        </div>
                        
                        <div style="text-align: center; border: 2px solid #27ae60; padding: 15px; border-radius: 8px;">
                            <div style="font-weight: bold; color: #27ae60;">æ¨ç†æ—¶</div>
                            <div style="font-size: 14px; margin: 10px 0;">
                                é€‰æ‹©æ¦‚ç‡æœ€é«˜çš„è¯<br>
                                æˆ–ä½¿ç”¨é‡‡æ ·ç­–ç•¥
                            </div>
                            <div style="background: #e8f5e8; padding: 8px; border-radius: 4px; font-size: 12px;">
                                é€‰æ‹©: argmax(P(è¯))
                            </div>
                        </div>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #3498db;">
                        <strong>å®Œæ•´å…¬å¼:</strong> P(y_t | y_{&lt;t}, x) = softmax(W_o Ã— h_t + b_o)
                    </div>
                </div>
                <p><strong>è¯´æ˜:</strong> è¾“å‡ºæŠ•å½±å±‚å°†æŠ½è±¡çš„éšè—è¡¨ç¤ºè½¬æ¢ä¸ºå…·ä½“çš„è¯æ±‡é€‰æ‹©æ¦‚ç‡ã€‚</p>
            `;
        }

        // æ­¥éª¤7: å®Œæ•´æµç¨‹æ¼”ç¤ºå‡½æ•°
        let demoTimer;
        let currentDemoStep = 0;

        function startFullDemo() {
            currentDemoStep = 0;
            clearInterval(demoTimer);
            showDemoStep(0);
            
            demoTimer = setInterval(() => {
                currentDemoStep++;
                if (currentDemoStep <= 3) {
                    showDemoStep(currentDemoStep);
                } else {
                    clearInterval(demoTimer);
                }
            }, 3000);
        }

        function resetDemo() {
            clearInterval(demoTimer);
            currentDemoStep = 0;
            const demoContent = document.getElementById('demo-content');
            demoContent.innerHTML = '<p>ç‚¹å‡»"å¼€å§‹å®Œæ•´æ¼”ç¤º"æŸ¥çœ‹Transformerå¤„ç†è¿‡ç¨‹...</p>';
            
            // é‡ç½®æ­¥éª¤æŒ‡ç¤ºå™¨
            document.querySelectorAll('.demo-step').forEach((step, index) => {
                step.classList.toggle('active', index === 0);
            });
        }

        function showDemoStep(step) {
            // æ›´æ–°æ­¥éª¤æŒ‡ç¤ºå™¨
            document.querySelectorAll('.demo-step').forEach((stepEl, index) => {
                stepEl.classList.toggle('active', index === step);
            });
            
            const demoContent = document.getElementById('demo-content');
            
            switch(step) {
                case 0:
                    demoContent.innerHTML = `
                        <h4>ğŸ”„ æ­¥éª¤1: è¾“å…¥å¤„ç†</h4>
                        <div style="background: white; padding: 15px; border-radius: 5px;">
                            <div style="text-align: center; margin-bottom: 15px;">
                                <strong>è¾“å…¥: "I love machine learning"</strong>
                            </div>
                            <div style="display: flex; justify-content: space-around; align-items: center;">
                                <div style="text-align: center;">
                                    <div style="background: #3498db; color: white; padding: 10px; border-radius: 5px;">åˆ†è¯</div>
                                    <div style="font-size: 12px; margin-top: 5px;">["I", "love", "machine", "learning"]</div>
                                </div>
                                <div>â†’</div>
                                <div style="text-align: center;">
                                    <div style="background: #e74c3c; color: white; padding: 10px; border-radius: 5px;">åµŒå…¥</div>
                                    <div style="font-size: 12px; margin-top: 5px;">4Ã—512 çŸ©é˜µ</div>
                                </div>
                                <div>â†’</div>
                                <div style="text-align: center;">
                                    <div style="background: #27ae60; color: white; padding: 10px; border-radius: 5px;">ä½ç½®ç¼–ç </div>
                                    <div style="font-size: 12px; margin-top: 5px;">æ·»åŠ ä½ç½®ä¿¡æ¯</div>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 1:
                    demoContent.innerHTML = `
                        <h4>ğŸ§  æ­¥éª¤2: ç¼–ç å™¨å¤„ç†</h4>
                        <div style="background: white; padding: 15px; border-radius: 5px;">
                            <div style="text-align: center; margin-bottom: 15px;">
                                <strong>6å±‚ç¼–ç å™¨å¤„ç†è¾“å…¥</strong>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
                                <div style="text-align: center; border: 2px solid #3498db; padding: 10px; border-radius: 8px;">
                                    <div style="font-weight: bold; color: #3498db;">å¤šå¤´è‡ªæ³¨æ„åŠ›</div>
                                    <div style="font-size: 12px;">ç†è§£è¯é—´å…³ç³»</div>
                                </div>
                                <div style="text-align: center; border: 2px solid #e74c3c; padding: 10px; border-radius: 8px;">
                                    <div style="font-weight: bold; color: #e74c3c;">å‰é¦ˆç½‘ç»œ</div>
                                    <div style="font-size: 12px;">å¢å¼ºè¡¨è¾¾èƒ½åŠ›</div>
                                </div>
                                <div style="text-align: center; border: 2px solid #27ae60; padding: 10px; border-radius: 8px;">
                                    <div style="font-weight: bold; color: #27ae60;">æ®‹å·®+å½’ä¸€åŒ–</div>
                                    <div style="font-size: 12px;">ç¨³å®šè®­ç»ƒ</div>
                                </div>
                            </div>
                            <div style="text-align: center; margin-top: 15px; background: #f8f9fa; padding: 10px; border-radius: 5px;">
                                è¾“å‡º: ä¸°å¯Œçš„ä¸Šä¸‹æ–‡è¡¨ç¤º (4Ã—512)
                            </div>
                        </div>
                    `;
                    break;
                case 2:
                    demoContent.innerHTML = `
                        <h4>ğŸ¯ æ­¥éª¤3: è§£ç å™¨ç”Ÿæˆ</h4>
                        <div style="background: white; padding: 15px; border-radius: 5px;">
                            <div style="text-align: center; margin-bottom: 15px;">
                                <strong>è‡ªå›å½’ç”Ÿæˆç›®æ ‡åºåˆ—</strong>
                            </div>
                            <div style="display: flex; justify-content: space-around; margin-bottom: 15px;">
                                <div style="text-align: center; background: #e74c3c; color: white; padding: 10px; border-radius: 8px;">
                                    <div>æ©ç è‡ªæ³¨æ„åŠ›</div>
                                    <div style="font-size: 12px;">é˜²æ­¢çœ‹åˆ°æœªæ¥</div>
                                </div>
                                <div style="text-align: center; background: #3498db; color: white; padding: 10px; border-radius: 8px;">
                                    <div>äº¤å‰æ³¨æ„åŠ›</div>
                                    <div style="font-size: 12px;">å…³æ³¨æºè¯­è¨€</div>
                                </div>
                                <div style="text-align: center; background: #27ae60; color: white; padding: 10px; border-radius: 8px;">
                                    <div>å‰é¦ˆç½‘ç»œ</div>
                                    <div style="font-size: 12px;">æœ€ç»ˆå¤„ç†</div>
                                </div>
                            </div>
                            <div style="background: #fff3cd; padding: 10px; border-radius: 5px; text-align: center;">
                                é€æ­¥ç”Ÿæˆ: "æˆ‘" â†’ "æˆ‘çˆ±" â†’ "æˆ‘çˆ±æœºå™¨" â†’ "æˆ‘çˆ±æœºå™¨å­¦ä¹ "
                            </div>
                        </div>
                    `;
                    break;
                case 3:
                    demoContent.innerHTML = `
                        <h4>ğŸ“Š æ­¥éª¤4: è¾“å‡ºç”Ÿæˆ</h4>
                        <div style="background: white; padding: 15px; border-radius: 5px;">
                            <div style="text-align: center; margin-bottom: 15px;">
                                <strong>æœ€ç»ˆè¾“å‡ºæ¦‚ç‡åˆ†å¸ƒ</strong>
                            </div>
                            <div style="display: flex; justify-content: center; align-items: center; gap: 20px;">
                                <div style="text-align: center;">
                                    <div style="background: #8e44ad; color: white; padding: 15px; border-radius: 8px;">
                                        è§£ç å™¨éšè—çŠ¶æ€<br>512ç»´
                                    </div>
                                </div>
                                <div>â†’</div>
                                <div style="text-align: center;">
                                    <div style="background: #f39c12; color: white; padding: 15px; border-radius: 8px;">
                                        çº¿æ€§æŠ•å½±<br>è¯æ±‡è¡¨å¤§å°
                                    </div>
                                </div>
                                <div>â†’</div>
                                <div style="text-align: center;">
                                    <div style="background: #27ae60; color: white; padding: 15px; border-radius: 8px;">
                                        Softmax<br>æ¦‚ç‡åˆ†å¸ƒ
                                    </div>
                                </div>
                            </div>
                            <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin-top: 15px; text-align: center;">
                                <strong>âœ… ç¿»è¯‘å®Œæˆ!</strong><br>
                                "I love machine learning" â†’ "æˆ‘çˆ±æœºå™¨å­¦ä¹ "
                            </div>
                        </div>
                    `;
                    break;
            }
        }
    </script>
</body>
</html>
